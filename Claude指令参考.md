# Claude指令参考

> **基于Claude的MODSDK开发工作流 - 完整指令速查表**
>
> 掌握所有可用指令，提升开发效率

---

## 🎯 核心指令

### /cc - 执行任务

**语法**:
```bash
/cc [任务描述]
```

**功能**: Claude Code的核心指令，用于执行任何开发任务

**示例**:
```bash
# 修复BUG
/cc 修复System初始化错误，日志显示GetComponent返回None

# 添加功能
/cc 添加玩家伤害事件监听，实现伤害统计

# 优化代码
/cc 优化Update方法，减少tick中的计算开销

# 配置调整
/cc 将配置文件中的商店价格调整为100金币

# 文档查询
/cc 解释双端隔离原则的实现方式
```

---

## 🔍 检索指令

### /cc 搜索 - 智能文档检索

**语法**:
```bash
/cc 搜索 <查询关键词>
/cc 搜索 tag:<标签名>
/cc 搜索 system:<系统名>
```

**功能**: 在项目文档和历史任务中搜索相关信息

**示例**:

**全文搜索**:
```bash
/cc 搜索 双端通信
# 搜索包含"双端通信"的所有文档

/cc 搜索 NotifyToClient
# 搜索API使用示例

/cc 搜索 生命周期
# 搜索System生命周期相关内容
```

**按标签搜索**:
```bash
/cc 搜索 tag:双端通信
# 搜索标记为"双端通信"标签的任务

/cc 搜索 tag:性能优化
# 搜索性能优化相关任务

/cc 搜索 tag:BUG修复
# 搜索已修复的BUG记录
```

**按System搜索**:
```bash
/cc 搜索 system:ShopSystem
# 搜索商店系统相关文档

/cc 搜索 system:PlayerSystem
# 搜索玩家系统相关内容
```

---

## 🗂️ 管理指令

### /cc 归档 - 任务归档

**语法**:
```bash
/cc 归档 <任务名>
```

**功能**: 将已完成的任务移动到归档目录

**示例**:
```bash
/cc 归档 商店系统开发
# 归档商店系统开发任务

/cc 归档 性能优化-Update方法
# 归档性能优化任务
```

**自动操作**:
- ✅ 移动任务到 `tasks/completed/`
- ✅ 更新任务元数据（添加完成时间）
- ✅ 更新全局索引
- ✅ 保留完整开发历史

---

## 📋 任务类型指令

### 🟢 微任务（<30行单文件）

**特点**: 快速执行，无需创建tasks目录

**示例**:
```bash
# 配置调整
/cc 将玩家初始生命值改为20

# 文案修改
/cc 修改商店欢迎提示为"欢迎来到商店！"

# 参数调整
/cc 调整重生时间为5秒

# 颜色修改
/cc 将聊天框提示颜色改为红色
```

**执行流程**:
1. 直接定位文件
2. 使用Edit工具修改
3. 创建Git commit
4. 完成（<2分钟）

---

### 🟡 标准任务（3-8个文件）

**特点**: 创建5章模板，记录开发过程

**示例**:
```bash
# 事件监听
/cc 添加玩家死亡事件监听，记录死亡次数

# 实体交互
/cc 创建自定义NPC，点击后打开商店界面

# 组件使用
/cc 使用HealthComponent实现玩家血量显示

# 功能扩展
/cc 为商店系统添加折扣功能
```

**执行流程**:
1. 创建 `tasks/[任务名]/` 目录
2. 生成5章模板（需求、探索、设计、实施、验证）
3. 父代理直接探索（无需Task工具）
4. 分阶段实施
5. 创建详细Git commit

---

### 🔴 复杂任务（>8个文件或架构级）

**特点**: 创建9章完整模板，可选并行探索

**示例**:
```bash
# 新系统开发
/cc 添加计分板系统，支持多种统计类型

# 架构重构
/cc 重构商店系统，分离数据层和表现层

# 性能优化
/cc 全面优化tick性能，减少50%CPU占用

# 复杂功能
/cc 实现队伍系统，支持创建、加入、退出、PVP设置
```

**执行流程**:
1. 创建 `tasks/[任务名]/` 目录
2. 生成9章完整模板（需求、探索、架构设计、数据模型、实施、测试、文档更新、总结、元数据）
3. 可选并行探索（仅在用户明确要求时）
4. 分阶段实施和测试
5. 更新相关文档
6. 创建详细Git commit

---

## 🛠️ 调试指令

### 问题诊断

```bash
# 查看错误日志
/cc 查看最近的错误日志，分析原因

# 调试代码
/cc 帮我调试System初始化错误

# 性能分析
/cc 分析Update方法的性能瓶颈

# 验证规范
/cc 检查代码是否违反CRITICAL规范
```

### 代码审查

```bash
# 审查代码质量
/cc 审查ShopSystem的代码质量

# 检查双端隔离
/cc 检查是否有跨端GetSystem调用

# 验证生命周期
/cc 验证所有System的生命周期是否正确
```

---

## 📚 文档指令

### 查询文档

```bash
# 查阅规范
/cc 解释双端隔离原则

# 查询API
/cc NotifyToClient的参数和用法是什么？

# 学习示例
/cc 给我一个事件监听的完整示例

# 查阅系统文档
/cc 查看ShopSystem的实现文档
```

### 更新文档

```bash
# 补充文档
/cc 为ShopSystem添加使用说明文档

# 更新规范
/cc 补充组件使用的注意事项到开发规范

# 记录问题
/cc 将这个BUG的解决方案记录到问题排查文档
```

### 文档维护

```bash
# 验证文档质量
/validate-docs
# 功能：
# - 检查所有系统是否有对应文档
# - 验证文档格式和完整性
# - 检查代码示例是否有效
# - 输出缺失文档清单

# 批量补充文档
/enhance-docs
# 功能：
# - 自动为缺失文档的系统生成文档
# - 补充不完整的文档章节
# - 更新过时的代码示例
# - 统一文档格式和风格
```

**使用场景**:
```bash
# 场景1: 定期维护（每周执行）
/validate-docs
# → 查看缺失文档清单
/enhance-docs
# → 自动补充缺失文档

# 场景2: 新系统开发后
/cc 创建新的队伍系统
# 开发完成后
/validate-docs
# → 检查是否需要补充文档
/enhance-docs
# → 自动生成系统文档

# 场景3: 代码重构后
/cc 重构商店系统
# 重构完成后
/validate-docs
# → 检查文档是否需要更新
/enhance-docs
# → 更新相关文档
```

---

## 🎨 代码生成指令

### 创建System

```bash
# 基础System
/cc 创建一个PlayerSystem，监听玩家加入游戏事件

# 双端System
/cc 创建商店系统，包含Server端和Client端

# 带组件的System
/cc 创建自定义血量显示系统，使用HealthComponent
```

### 创建事件监听

```bash
# 玩家事件
/cc 监听玩家死亡事件，记录死亡位置

# 实体事件
/cc 监听实体受伤事件，实现伤害统计

# 方块事件
/cc 监听方块破坏事件，实现方块保护
```

### 创建组件使用

```bash
# 使用原生组件
/cc 使用ItemComponent获取玩家手持物品

# 使用自定义组件
/cc 创建自定义组件存储玩家金币数据

# 组件操作
/cc 使用HealthComponent修改玩家最大生命值
```

---

## 🔄 工作流指令

### Git操作

```bash
# 查看状态
/cc 查看当前git状态

# 查看历史
/cc 查看最近5次commit

# 回退更改
/cc 回退上一次commit（谨慎使用）
```

### 项目管理

```bash
# 查看任务列表
/cc 列出所有未完成的任务

# 查看项目状态
/cc 总结当前项目的功能和进度

# 清理归档
/cc 归档所有已完成的任务
```

---

## ⚡ 快捷技巧

### 1. 连续任务

```bash
# 方式1: 一次提交多个任务
/cc 1. 修复System初始化错误
    2. 添加玩家加入事件监听
    3. 更新配置文件

# 方式2: 逐个执行（推荐）
/cc 修复System初始化错误
# 等待完成后
/cc 添加玩家加入事件监听
```

### 2. 模糊描述

```bash
# Claude会自动推断需求
/cc 商店价格太贵了
# → Claude会查找配置文件并调整价格

/cc 玩家加入时显示欢迎消息
# → Claude会创建事件监听和消息发送逻辑
```

### 3. 参考历史

```bash
# Claude会自动查找相关历史
/cc 参考商店系统的实现，创建一个装备商店

/cc 按照之前的方式，添加新的预设类型
```

---

## 🚨 错误处理

### 常见错误指令

```bash
# GetComponent返回None
/cc 修复GetComponent返回None的错误
# → Claude会检查是否在Create中调用

# 跨端GetSystem错误
/cc 修复ServerSystem中调用ClientSystem的错误
# → Claude会改为NotifyToClient通信

# 模块导入错误
/cc 修复模块导入错误
# → Claude会检查导入路径
```

---

## 📊 高级指令

### 性能优化

```bash
# 全面性能分析
/cc 分析整个项目的性能瓶颈，提供优化建议

# 特定优化
/cc 优化商店系统的数据存储方式，使用缓存减少查询
```

### 代码重构

```bash
# 重构System
/cc 重构PlayerSystem，分离数据管理和事件处理逻辑

# 重构模块
/cc 重构配置模块，使用JSON替代Python字典
```

### 批量操作

```bash
# 批量修改
/cc 为所有System添加日志记录功能

# 批量检查
/cc 检查所有System是否遵循CRITICAL规范
```

---

## 🎓 学习指令

### 新手学习路径

```bash
# 第1天：了解基础
/cc 解释MODSDK的基本架构
/cc 什么是System？如何创建？
/cc 双端隔离原则是什么？

# 第2天：实践开发
/cc 创建一个简单的玩家系统
/cc 添加玩家加入事件监听
/cc 使用NotifyToClient发送消息

# 第3天：进阶功能
/cc 创建一个商店系统
/cc 实现物品购买功能
/cc 添加数据持久化
```

### 查阅官方文档

```bash
# Claude会使用WebFetch查询
/cc 查询NotifyToClient的官方文档

/cc 查询HealthComponent的所有方法

/cc 查询基岩版实体的NBT结构
```

---

## 💡 最佳实践

### 1. 清晰描述任务

```bash
# ❌ 不好
/cc 改一下商店

# ✅ 好
/cc 将商店中钻石剑的价格从100金币改为50金币
```

### 2. 分解复杂任务

```bash
# ❌ 不好
/cc 实现完整的经济系统

# ✅ 好
/cc 第一步：创建货币存储系统
# 完成后
/cc 第二步：实现货币获取和消耗功能
# 完成后
/cc 第三步：添加商店购买功能
```

### 3. 引用具体位置

```bash
# ❌ 不好
/cc 修复那个错误

# ✅ 好
/cc 修复ShopSystem.py第123行的GetComponent返回None错误
```

### 4. 利用搜索加速

```bash
# 先搜索相关内容
/cc 搜索 双端通信

# 根据搜索结果执行任务
/cc 参考双端通信的示例，实现商店UI显示
```

---

## 🔗 相关文档

- **[安装与配置.md](./安装与配置.md)** - 环境部署指南
- **[快速开始.md](./markdown/快速开始.md)** - 5分钟入门
- **[开发规范.md](./markdown/开发规范.md)** - CRITICAL规范
- **[问题排查.md](./markdown/问题排查.md)** - 调试技巧

---

## 📝 指令速查表

| 指令 | 功能 | 示例 |
|------|------|------|
| `/cc [任务]` | 执行任务 | `/cc 修复BUG` |
| `/cc 搜索 [关键词]` | 全文搜索 | `/cc 搜索 双端通信` |
| `/cc 搜索 tag:[标签]` | 按标签搜索 | `/cc 搜索 tag:性能优化` |
| `/cc 搜索 system:[名称]` | 按System搜索 | `/cc 搜索 system:ShopSystem` |
| `/cc 归档 [任务名]` | 归档任务 | `/cc 归档 商店系统开发` |

---

_最后更新: 2025-11-09 | 文档版本: 1.0_
