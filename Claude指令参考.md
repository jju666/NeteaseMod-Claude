# Claude指令参考

> **基于Claude的MODSDK开发工作流 - 指令速查手册**
>
> 快速查找常用命令和使用示例

---

## 🎯 核心指令

### /cc - 执行任务

**语法**:
```bash
/cc [任务描述]
```

**功能**: Claude Code的核心指令，用于执行任何开发任务

**示例**:
```bash
# 修复BUG
/cc 修复System初始化错误，日志显示GetComponent返回None

# 添加功能
/cc 添加玩家伤害事件监听，实现伤害统计

# 优化代码
/cc 优化Update方法，减少tick中的计算开销

# 配置调整
/cc 将配置文件中的玩家初始生命值调整为40

# 文档查询
/cc 解释双端隔离原则的实现方式
```

---

## 🔄 工作流管理指令

### /discover - 自适应项目结构发现 ⭐ v16.0

**语法**:
```bash
/discover
```

**功能**: 自动扫描项目代码，发现组件类型和文档组织模式

**执行流程**:
1. 自动扫描项目代码，识别所有 Python 类
2. 识别 MODSDK 官方概念（System、Component）
3. 推断项目自定义模式（State、Preset、Manager等）
4. 生成组件→文档路径映射规则
5. 输出到 `.claude/discovered-patterns.json`

**性能**: 5-10秒，零Token消耗

---

### /validate-docs - 文档完整性验证

**语法**:
```bash
/validate-docs
```

**功能**: 验证文档覆盖率，生成待补充清单

**依赖**: 需要先执行 `/discover`

**执行流程**:
1. 读取自适应发现结果（`.claude/discovered-patterns.json`）
2. AI智能推断中文文档名
3. 检查文档覆盖率
4. 生成 `markdown/文档待补充清单.md`

---

### /enhance-docs - 批量文档内容生成

**语法**:
```bash
/enhance-docs
```

**功能**: 批量补充文档内容（非占位符）

**依赖**: 需要先执行 `/validate-docs`

**执行流程**:
1. 读取文档待补充清单
2. AI深度分析源代码
3. 生成完整文档内容（1500-3000字）
4. 自动更新待补充清单

---

## 📝 指令速查表

| 指令 | 类型 | 功能 | 示例 |
|------|------|------|------|
| `initmc` | 终端命令 | 全局部署工作流 | `initmc` |
| `initmc --sync` | 终端命令 | 同步更新工作流 ⭐ v16.0 | `initmc --sync` |
| `initmc --reset` | 终端命令 | 强制重置工作流 ⭐ v16.0 | `initmc --reset` |
| `/discover` | Slash命令 | 自适应项目结构发现 | `/discover` |
| `/cc [任务]` | Slash命令 | 执行任务 | `/cc 修复BUG` |
| `/validate-docs` | Slash命令 | 验证文档完整性 | `/validate-docs` |
| `/enhance-docs` | Slash命令 | 批量生成文档内容 | `/enhance-docs` |

---

## 📋 任务类型指令示例

### 🟢 微任务（<30行单文件）

**特点**: 快速执行，无需创建tasks目录

```bash
# 配置调整
/cc 将玩家初始生命值改为20

# 文案修改
/cc 修改玩家加入提示为"欢迎来到服务器！"

# 参数调整
/cc 调整重生时间为5秒

# 颜色修改
/cc 将聊天框提示颜色改为红色
```

---

### 🟡 标准任务（3-8个文件）

**特点**: 创建5章模板，记录开发过程

```bash
# 事件监听
/cc 添加玩家死亡事件监听，记录死亡次数

# 实体交互
/cc 创建自定义NPC，点击后打开对话界面

# 组件使用
/cc 使用AttrComp实现玩家血量显示

# 功能扩展
/cc 为玩家系统添加经验值功能
```

---

### 🔴 复杂任务（>8个文件或架构级）

**特点**: 创建9章完整模板，可选并行探索

```bash
# 新系统开发
/cc 添加计分板系统，支持多种统计类型

# 架构重构
/cc 重构玩家系统，分离数据层和表现层

# 性能优化
/cc 全面优化tick性能，减少50%CPU占用

# 复杂功能
/cc 实现队伍系统，支持创建、加入、退出、PVP设置
```

---

## 🛠️ 调试指令示例

### 问题诊断

```bash
# 查看错误日志
/cc 查看最近的错误日志，分析原因

# 调试代码
/cc 帮我调试System初始化错误

# 性能分析
/cc 分析Update方法的性能瓶颈

# 验证规范
/cc 检查代码是否违反CRITICAL规范
```

### 代码审查

```bash
# 审查代码质量
/cc 审查PlayerSystem的代码质量

# 检查双端隔离
/cc 检查是否有跨端GetSystem调用

# 验证生命周期
/cc 验证所有System的生命周期是否正确
```

---

## 📚 文档指令示例

### 查询文档

```bash
# 查阅规范
/cc 解释双端隔离原则

# 查询API
/cc NotifyToClient的参数和用法是什么？

# 学习示例
/cc 给我一个事件监听的完整示例

# 查阅系统文档
/cc 查看PlayerSystem的实现文档
```

---

## 🎨 代码生成指令示例

### 创建System

```bash
# 基础System
/cc 创建一个PlayerSystem，监听玩家加入游戏事件

# 双端System
/cc 创建商店系统，包含Server端和Client端

# 带组件的System
/cc 创建自定义血量显示系统，使用HealthComponent
```

### 创建事件监听

```bash
# 玩家事件
/cc 监听玩家死亡事件，记录死亡位置

# 实体事件
/cc 监听实体受伤事件，实现伤害统计

# 方块事件
/cc 监听方块破坏事件，实现方块保护
```

---

## ⚡ 快捷技巧

### 1. 连续任务

```bash
# 方式1: 一次提交多个任务
/cc 1. 修复System初始化错误
    2. 添加玩家加入事件监听
    3. 更新配置文件

# 方式2: 逐个执行（推荐）
/cc 修复System初始化错误
# 等待完成后
/cc 添加玩家加入事件监听
```

### 2. 模糊描述

```bash
# Claude会自动推断需求
/cc 玩家生命值太低了
# → Claude会查找配置文件并调整生命值

/cc 玩家加入时显示欢迎消息
# → Claude会创建事件监听和消息发送逻辑
```

### 3. 参考历史

```bash
# Claude会自动查找相关历史
/cc 参考玩家系统的实现，创建一个队伍系统

/cc 按照之前的方式，添加新的自定义组件
```

---

## 💡 最佳实践

### 1. 清晰描述任务

```bash
# ❌ 不好
/cc 改一下配置

# ✅ 好
/cc 将玩家初始生命值从20改为40
```

### 2. 分解复杂任务

```bash
# ❌ 不好
/cc 实现完整的经济系统

# ✅ 好
/cc 第一步：创建货币存储系统
# 完成后
/cc 第二步：实现货币获取和消耗功能
```

### 3. 引用具体位置

```bash
# ❌ 不好
/cc 修复那个错误

# ✅ 好
/cc 修复PlayerSystem.py第123行的GetComponent返回None错误
```

---

## 🔗 相关文档

- **[README.md](./README.md)** - 项目简介和快速上手
- **[CLAUDE.md](./CLAUDE.md)** - AI工作流完整配置
- **[快速开始.md](./markdown/快速开始.md)** - 5分钟入门
- **[开发规范.md](./markdown/开发规范.md)** - CRITICAL规范
- **[问题排查.md](./markdown/问题排查.md)** - 调试技巧
- **[快速参考.md](./快速参考.md)** - 技术架构和高级配置

---

_最后更新: 2025-11-11 | 文档版本: v3.0 (精简版)_
