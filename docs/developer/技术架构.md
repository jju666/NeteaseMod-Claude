# NeteaseMod-Claude æŠ€æœ¯æ¶æ„æ–‡æ¡£

> **æ–‡æ¡£ç‰ˆæœ¬**: v21.1.2
> **æœ€åæ›´æ–°**: 2025-11-15
> **æ–‡æ¡£ç±»å‹**: æŠ€æœ¯æ¶æ„è®¾è®¡æ–‡æ¡£
> **ç›®æ ‡è¯»è€…**: ç³»ç»Ÿå¼€å‘è€…ã€æ¶æ„å¸ˆã€é«˜çº§è´¡çŒ®è€…
>
> **âš ï¸ æ¶æ„æ›´æ–°**: v20.2.10æ ¸å¿ƒæ˜¯**ç»Ÿä¸€å·¥ä½œæµé©±åŠ¨å™¨**,å®ç°ä»»åŠ¡çŠ¶æ€æœºé©±åŠ¨ã€å¼‚å¸¸éš”ç¦»æœºåˆ¶ã€ä¼šè¯å†å²æŒä¹…åŒ–

---

## ğŸ“‹ ç›®å½•

- [1. ç³»ç»Ÿæ¦‚è¿°](#1-ç³»ç»Ÿæ¦‚è¿°)
- [2. æ ¸å¿ƒæ¶æ„](#2-æ ¸å¿ƒæ¶æ„)
- [3. æ¨¡å—è®¾è®¡](#3-æ¨¡å—è®¾è®¡)
- [4. æ•°æ®æµä¸äº¤äº’](#4-æ•°æ®æµä¸äº¤äº’)
- [5. å¼‚å¸¸éš”ç¦»æœºåˆ¶](#5-å¼‚å¸¸éš”ç¦»æœºåˆ¶) â­ **NEW v20.2.8**
- [6. æŠ€æœ¯æ ˆ](#6-æŠ€æœ¯æ ˆ)
- [7. è®¾è®¡åŸåˆ™](#7-è®¾è®¡åŸåˆ™)
- [8. æ‰©å±•æœºåˆ¶](#8-æ‰©å±•æœºåˆ¶)

---

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 é¡¹ç›®å®šä½

NeteaseMod-Claude æ˜¯ä¸€ä¸ª**AIé©±åŠ¨çš„MODSDKå¼€å‘å·¥ä½œæµç”Ÿæˆå™¨**ï¼Œä¸ºç½‘æ˜“æˆ‘çš„ä¸–ç•ŒMODSDKé¡¹ç›®æä¾›æ™ºèƒ½åŒ–çš„å¼€å‘è¾…åŠ©èƒ½åŠ›ã€‚

**æ ¸å¿ƒä»·å€¼**ï¼š
- ğŸ¤– å°†AIï¼ˆClaudeï¼‰ä¸MODSDKå¼€å‘å·¥ä½œæµæ·±åº¦é›†æˆ
- ğŸ“š è‡ªåŠ¨åŒ–æ–‡æ¡£ç®¡ç†ä¸çŸ¥è¯†åº“ç»´æŠ¤
- ğŸ”„ åŒå±‚æ¶æ„å®ç°ä¸Šæ¸¸åŸºçº¿ä¸é¡¹ç›®å®šåˆ¶åˆ†ç¦»
- ğŸ¯ æ™ºèƒ½åŒ–ä»»åŠ¡æ‰§è¡Œä¸çŸ¥è¯†éªŒè¯æœºåˆ¶

### 1.2 ç³»ç»Ÿèƒ½åŠ›çŸ©é˜µ

| èƒ½åŠ›åŸŸ | åŠŸèƒ½ | å®ç°æ–¹å¼ |
|-------|------|---------|
| **é¡¹ç›®åˆ†æ** | ä»£ç ç»“æ„æ‰«æã€ç»„ä»¶å‘ç°ã€å¤æ‚åº¦è¯„ä¼° | ProjectAnalyzer + ProjectDiscovery |
| **æ–‡æ¡£ç”Ÿæˆ** | ä¸‰å±‚æ–‡æ¡£æ¶æ„ã€è‡ªé€‚åº”ç»´æŠ¤ | DocumentGenerator + IntelligentDocMaintenance |
| **ç‰ˆæœ¬ç®¡ç†** | å·¥ä½œæµç‰ˆæœ¬æ£€æµ‹ã€è‡ªåŠ¨è¿ç§»ã€å†²çªæ£€æµ‹ | VersionChecker + MigrationV18 |
| **æ™ºèƒ½æ£€ç´¢** | å¤šç»´åº¦æ–‡æ¡£ç´¢å¼•ã€è¯­ä¹‰æœç´¢ | DocumentIndexer + SearchEngine |
| **å·¥ä½œæµå¼ºåˆ¶** | Hookæœºåˆ¶ã€çŠ¶æ€è¿½è¸ªã€æ­¥éª¤éªŒè¯ | ç»Ÿä¸€å·¥ä½œæµé©±åŠ¨å™¨ + 25ä¸ªPython Hookè„šæœ¬ |
| **ä»»åŠ¡éš”ç¦»** | ç‹¬ç«‹ä»»åŠ¡ç›®å½•ã€çŠ¶æ€æŒä¹…åŒ–ã€ä¼šè¯å†å² | tasks/{task_id}/ + .task-meta.json + .conversation.jsonl |
| **å¼‚å¸¸éš”ç¦»** | 5å¤§é˜¶æ®µç‹¬ç«‹å®¹é”™ã€é˜²æ­¢å•ç‚¹æ•…éšœ | unified-workflow-driver.py å¼‚å¸¸éš”ç¦»æœºåˆ¶ |

### 1.3 æŠ€æœ¯ç‰¹è‰²

1. **åŒå±‚æ–‡æ¡£æ¶æ„**ï¼šä¸Šæ¸¸åŸºçº¿ï¼ˆè½¯è¿æ¥ï¼‰+ é¡¹ç›®è¦†ç›–å±‚ï¼ˆç”¨æˆ·å®šåˆ¶ï¼‰
2. **è‡ªé€‚åº”å‘ç°æœºåˆ¶**ï¼šæ— éœ€ç¡¬ç¼–ç ç»„ä»¶ç±»å‹ï¼Œè‡ªåŠ¨æ¨æ–­é¡¹ç›®ç»“æ„
3. **ç»Ÿä¸€å·¥ä½œæµé©±åŠ¨**ï¼šé€šè¿‡çŠ¶æ€æœºé©±åŠ¨å®ç°100%å·¥ä½œæµå¼ºåˆ¶æ‰§è¡Œ (v20.2+)
4. **ä»»åŠ¡éš”ç¦»æœºåˆ¶**ï¼šæ¯ä¸ªä»»åŠ¡ç‹¬ç«‹ç›®å½• `tasks/{task_id}/`ï¼ŒçŠ¶æ€æŒä¹…åŒ–åˆ° `.task-meta.json`
5. **ä¼šè¯å†å²æŒä¹…åŒ–**ï¼šå®Œæ•´è®°å½•å·¥å…·è°ƒç”¨åˆ° `.conversation.jsonl`ï¼Œæ”¯æŒè·¨ä¼šè¯æ¢å¤ (v20.2.8+)
6. **å¼‚å¸¸éš”ç¦»æœºåˆ¶**ï¼š5å¤§é˜¶æ®µç‹¬ç«‹å®¹é”™ï¼Œé˜²æ­¢å•ç‚¹æ•…éšœå¯¼è‡´Hookå®Œå…¨å¤±æ•ˆ (v20.2.8+)
7. **æ™ºèƒ½æ–‡æ¡£è·¯ç”±**ï¼šAIè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ–‡æ¡£ï¼ˆè¦†ç›–å±‚ä¼˜å…ˆï¼‰
8. **æ¸è¿›å¼è¿ç§»**ï¼šæ”¯æŒä»v15.xåˆ°v20.xçš„æ— æŸå‡çº§

---

## 2. æ ¸å¿ƒæ¶æ„

### 2.1 ç³»ç»Ÿæ¶æ„å›¾ (v20.2.10)

```mermaid
graph TB
    subgraph "ç”¨æˆ·å±‚"
        CLI[CLIå‘½ä»¤]
        Claude[Claude Code AI]
        User[ç”¨æˆ·è¾“å…¥]
    end

    subgraph "å·¥ä½œæµå¼•æ“"
        InitWorkflow[init-workflow.js<br/>ä¸»å…¥å£]
        Analyzer[analyzer.js<br/>é¡¹ç›®åˆ†æå™¨]
        Generator[generator.js<br/>æ–‡æ¡£ç”Ÿæˆå™¨]
        VersionChecker[version-checker.js<br/>ç‰ˆæœ¬æ£€æµ‹å™¨]
    end

    subgraph "æ™ºèƒ½æœåŠ¡å±‚"
        Discovery[project-discovery.js<br/>ç»“æ„å‘ç°]
        Maintenance[intelligent-doc-maintenance.js<br/>æ™ºèƒ½æ–‡æ¡£ç»´æŠ¤]
        Indexer[indexer.js<br/>æ–‡æ¡£ç´¢å¼•å™¨]
        SearchEngine[search-engine.js<br/>æ£€ç´¢å¼•æ“]
    end

    subgraph "Hookå¼ºåˆ¶æ‰§è¡Œå±‚ - v20.2æ ¸å¿ƒæ¶æ„"
        SessionStart[session-start-hook.py<br/>ä¼šè¯åˆå§‹åŒ–]
        UserPromptHook[user-prompt-submit-hook.py<br/>ä»»åŠ¡åˆå§‹åŒ–]
        IterationTracker[iteration-tracker-hook.py<br/>è¿­ä»£è¿½è¸ª]
        UnifiedDriver[unified-workflow-driver.py<br/>ç»Ÿä¸€å·¥ä½œæµé©±åŠ¨å™¨]
        ConversationRecorder[conversation-recorder.py<br/>ä¼šè¯å†å²è®°å½•]
        PostArchive[post-archive-hook.py<br/>ä»»åŠ¡å½’æ¡£]
        StopHook[stop-hook.py<br/>æ”¶å°¾éªŒè¯]
    end

    subgraph "è¾…åŠ©Hookå±‚"
        CriticalCheck[check-critical-rules.py<br/>CRITICALè§„èŒƒæ£€æŸ¥]
        EnforceStep2[enforce-step2.py<br/>æ­¥éª¤2å¼ºåˆ¶]
        TrackDoc[track-doc-reading.py<br/>æ–‡æ¡£è¿½è¸ª]
        PreCompact[pre-compact-reminder.py<br/>æŠ—å‹ç¼©]
    end

    subgraph "ä»»åŠ¡éš”ç¦»å±‚"
        TaskDir[tasks/{task_id}/<br/>ä»»åŠ¡ç‹¬ç«‹ç›®å½•]
        TaskMeta[.task-meta.json<br/>ä»»åŠ¡å…ƒæ•°æ®]
        WorkflowState[workflow-state.json<br/>å·¥ä½œæµçŠ¶æ€æœº]
        TaskActive[.task-active.json<br/>æ´»è·ƒä»»åŠ¡æ ‡å¿—]
        ConversationLog[.conversation.jsonl<br/>ä¼šè¯å†å²]
    end

    subgraph "æ•°æ®å±‚"
        Templates[templates/<br/>æ¨¡æ¿åº“]
        CoreDocs[markdown/<br/>æ ¸å¿ƒæ–‡æ¡£]
        ProjectData[é¡¹ç›®æ•°æ®<br/>Systems/Presets]
    end

    CLI --> InitWorkflow
    InitWorkflow --> Analyzer
    InitWorkflow --> Generator
    InitWorkflow --> VersionChecker

    Analyzer --> Discovery
    Generator --> Maintenance
    Generator --> Templates

    Maintenance --> ProjectData
    Indexer --> SearchEngine

    User -->|/mcå‘½ä»¤| Claude
    Claude --> SessionStart
    Claude --> UserPromptHook
    Claude --> IterationTracker
    Claude --> UnifiedDriver
    Claude --> ConversationRecorder

    UserPromptHook --> TaskDir
    UserPromptHook --> TaskMeta
    UserPromptHook --> TaskActive
    UserPromptHook --> ConversationLog

    UnifiedDriver --> WorkflowState
    UnifiedDriver --> TaskMeta
    IterationTracker --> TaskMeta
    ConversationRecorder --> ConversationLog

    PostArchive --> TaskDir
    StopHook --> TaskMeta

    UnifiedDriver -.çŠ¶æ€é©±åŠ¨.-> Claude
    CriticalCheck -.é˜»æ­¢è¿è§„.-> Claude
    EnforceStep2 -.é˜»æ­¢è·³è¿‡.-> Claude
    PreCompact -.æ³¨å…¥è§„åˆ™.-> Claude

    style InitWorkflow fill:#4A90E2
    style Claude fill:#E24A4A
    style UnifiedDriver fill:#FF6B6B
    style TaskDir fill:#50C878
    style WorkflowState fill:#FFD93D
    style ConversationLog fill:#A8E6CF
```

### 2.2 ä¸‰å±‚æ–‡æ¡£æ¶æ„

```mermaid
graph LR
    subgraph "Layer 1: é€šç”¨å±‚ï¼ˆä¸Šæ¸¸åŸºçº¿ï¼‰"
        CoreDocs[.claude/core-docs/]
        Commands[.claude/commands/]
        Hooks[.claude/hooks/]
    end

    subgraph "Layer 2: æ¶æ„å±‚ï¼ˆAIç”Ÿæˆï¼‰"
        Systems[markdown/systems/]
        Components[markdown/components/]
    end

    subgraph "Layer 3: é¡¹ç›®å±‚ï¼ˆç”¨æˆ·å®šåˆ¶ï¼‰"
        CoreOverride[markdown/core/]
        Business[markdown/business/]
    end

    CoreDocs -.è½¯è¿æ¥.-> Upstream[ä¸Šæ¸¸å·¥ä½œæµä»“åº“]

    AI[Claude AI] --> |ä¼˜å…ˆè¯»å–| CoreOverride
    AI --> |å›é€€è¯»å–| CoreDocs
    AI --> |ç”Ÿæˆ| Systems
    AI --> |è¡¥å……| Business

    style CoreOverride fill:#FFD700
    style CoreDocs fill:#87CEEB
    style AI fill:#E24A4A
```

**æ¶æ„è¯´æ˜**ï¼š

- **Layer 1ï¼ˆé€šç”¨å±‚ï¼‰**ï¼šç”±å·¥ä½œæµç®¡ç†ï¼Œé€šè¿‡è½¯è¿æ¥å¼•ç”¨ä¸Šæ¸¸ä»“åº“ï¼Œå‡çº§æ—¶è‡ªåŠ¨åŒæ­¥
- **Layer 2ï¼ˆæ¶æ„å±‚ï¼‰**ï¼šAIæ ¹æ®ä»£ç ç»“æ„è‡ªåŠ¨ç”Ÿæˆï¼ŒåŒ…å«Systemsæ–‡æ¡£ã€ç»„ä»¶æ–‡æ¡£
- **Layer 3ï¼ˆé¡¹ç›®å±‚ï¼‰**ï¼šç”¨æˆ·è‡ªä¸»ç»´æŠ¤ï¼ŒåŒ…å«é¡¹ç›®ç‰¹å®šä¸šåŠ¡é€»è¾‘ã€å®šåˆ¶è§„èŒƒ

**æ™ºèƒ½è·¯ç”±è§„åˆ™**ï¼š
1. AIè¯»å–æ ¸å¿ƒæ–‡æ¡£æ—¶ï¼Œä¼˜å…ˆæ£€æŸ¥ `markdown/core/` è¦†ç›–å±‚
2. å¦‚æœè¦†ç›–å±‚ä¸å­˜åœ¨ï¼Œå›é€€åˆ° `.claude/core-docs/` åŸºçº¿å±‚
3. ç‰ˆæœ¬å‡çº§æ—¶ï¼Œè‡ªåŠ¨æ£€æµ‹è¦†ç›–å±‚å†²çªå¹¶æç¤ºåˆå¹¶

---

## 3. æ¨¡å—è®¾è®¡

### 3.1 æ ¸å¿ƒæ¨¡å—èŒè´£

#### 3.1.1 init-workflow.jsï¼ˆå·¥ä½œæµå…¥å£ï¼‰

**èŒè´£**ï¼š
- åè°ƒæ•´ä¸ªåˆå§‹åŒ–æµç¨‹
- å¤„ç†å‘½ä»¤è¡Œå‚æ•°ï¼ˆ`--sync`, `--force`/`--reset`, `--auto-migrate`ï¼‰
- æ‰§è¡Œç‰ˆæœ¬è¿ç§»æ£€æµ‹
- è°ƒåº¦åˆ†æå™¨å’Œç”Ÿæˆå™¨

**å…³é”®æµç¨‹**ï¼š
```javascript
// ä¸»æµç¨‹ä¼ªä»£ç 
async function main() {
  1. è§£æå‘½ä»¤è¡Œå‚æ•°
  2. æ£€æŸ¥æ˜¯å¦éœ€è¦è¿ç§»ï¼ˆv18.0è¿ç§»é€»è¾‘ï¼‰
  3. æ‰§è¡Œé¡¹ç›®åˆ†æï¼ˆProjectAnalyzerï¼‰
  4. ç”Ÿæˆæ–‡æ¡£ï¼ˆDocumentGeneratorï¼‰
  5. åˆ›å»ºè½¯è¿æ¥ï¼ˆSymlinkManagerï¼‰
  6. è¾“å‡ºéƒ¨ç½²æŠ¥å‘Š
}
```

**è¾“å…¥**ï¼š
- ç›®æ ‡é¡¹ç›®è·¯å¾„
- å‘½ä»¤æ ‡å¿—ï¼ˆ--sync, --force/--reset, --auto-migrateï¼‰

**è¾“å‡º**ï¼š
- å®Œæ•´çš„å·¥ä½œæµæ–‡ä»¶ç»“æ„
- `.claude/workflow-manifest.json`ï¼ˆç‰ˆæœ¬è¿½è¸ªï¼‰
- éƒ¨ç½²æ—¥å¿—

---

#### 3.1.2 analyzer.jsï¼ˆé¡¹ç›®åˆ†æå™¨ï¼‰

**èŒè´£**ï¼š
- æ‰«æPythonä»£ç ç»“æ„
- æ£€æµ‹MODSDKæ ‡å‡†ç»„ä»¶ï¼ˆSystems/Presetsï¼‰
- è®¡ç®—ä»£ç å¤æ‚åº¦
- æ¨æ–­é¡¹ç›®ç±»å‹ï¼ˆRPG/BedWars/Generalï¼‰

**æ ¸å¿ƒç®—æ³•**ï¼š

```mermaid
flowchart TD
    Start[å¼€å§‹åˆ†æ] --> ScanFiles[æ‰«ææ‰€æœ‰.pyæ–‡ä»¶]
    ScanFiles --> DetectType[æ£€æµ‹é¡¹ç›®ç±»å‹]

    DetectType --> CheckModMain{å­˜åœ¨modMain.py?}
    CheckModMain -->|æ˜¯| Standard[æ ‡å‡†MODSDKé¡¹ç›®]
    CheckModMain -->|å¦| CheckHints[æ£€æµ‹å…¶ä»–ç‰¹å¾]

    CheckHints --> |behavior_packs/| NetEaseMap[ç½‘æ˜“åœ°å›¾é¡¹ç›®]
    CheckHints --> |deploy.json| Apollo[Apolloæ¶æ„]

    Standard --> ScanSystems[æ‰«æSystems]
    NetEaseMap --> ScanSystems
    Apollo --> ScanSystems

    ScanSystems --> CalcComplexity[è®¡ç®—å¤æ‚åº¦]
    CalcComplexity --> InferBusiness[æ¨æ–­ä¸šåŠ¡ç±»å‹]

    InferBusiness --> GenerateReport[ç”Ÿæˆåˆ†ææŠ¥å‘Š]
    GenerateReport --> End[ç»“æŸ]

    style Start fill:#4A90E2
    style CalcComplexity fill:#50C878
    style GenerateReport fill:#FFD700
```

**å¤æ‚åº¦è¯„åˆ†ç®—æ³•**ï¼š
```javascript
function _calculateComplexity() {
  let score = 0;

  // å› ç´ 1: ä»£ç è¡Œæ•°ï¼ˆæƒé‡3ï¼‰
  if (linesOfCode > 500) score += 3;
  else if (linesOfCode > 200) score += 2;
  else score += 1;

  // å› ç´ 2: æ–¹æ³•æ•°é‡ï¼ˆæƒé‡2ï¼‰
  if (methodCount > 15) score += 2;
  else if (methodCount > 5) score += 1;

  // å› ç´ 3: äº‹ä»¶ç›‘å¬æ•°é‡ï¼ˆæƒé‡1ï¼‰
  if (eventListeners > 5) score += 1;

  // å› ç´ 4: æ ¸å¿ƒSystemåˆ¤æ–­ï¼ˆæƒé‡2ï¼‰
  if (name.includes('Manager', 'Core', 'Game')) score += 2;

  // å› ç´ 5: ä¾èµ–å…³ç³»ï¼ˆæƒé‡2ï¼‰
  if (importCount > 5) score += 2;

  return score; // 0-10åˆ†
}
```

**è¾“å‡º**ï¼š`AnalysisReport` å¯¹è±¡ï¼ŒåŒ…å«ï¼š
- `metadata`: é¡¹ç›®å…ƒæ•°æ®ï¼ˆç±»å‹ã€è§„æ¨¡ã€ç‰¹å¾ï¼‰
- `codeStructure`: ä»£ç ç»“æ„ï¼ˆSystems/Presetsåˆ—è¡¨ï¼‰
- `docCoverage`: æ–‡æ¡£è¦†ç›–ç‡ï¼ˆç°æœ‰æ–‡æ¡£ç»Ÿè®¡ï¼‰

---

#### 3.1.3 generator.jsï¼ˆæ–‡æ¡£ç”Ÿæˆå™¨ï¼‰

**èŒè´£**ï¼š
- æ ¹æ®åˆ†ææŠ¥å‘Šç”Ÿæˆä¸‰å±‚æ–‡æ¡£ç»“æ„
- å¤„ç†æ¨¡æ¿æ›¿æ¢ï¼ˆå ä½ç¬¦æ›¿æ¢ï¼‰
- éƒ¨ç½²Hookè„šæœ¬
- åˆ›å»ºè½¯è¿æ¥åˆ°ä¸Šæ¸¸æ–‡æ¡£

**ç”Ÿæˆæµç¨‹**ï¼š

```mermaid
sequenceDiagram
    participant Init as init-workflow
    participant Gen as generator.js
    participant Template as templates/
    participant Target as ç›®æ ‡é¡¹ç›®

    Init->>Gen: ä¼ å…¥AnalysisReport
    Gen->>Gen: _buildReplacements() æ„å»ºæ›¿æ¢è¡¨

    Note over Gen: Layer 1 ç”Ÿæˆ
    Gen->>Template: è¯»å–mc.md.template
    Gen->>Gen: replacePlaceholders()
    Gen->>Target: å†™å…¥.claude/commands/mc.md

    Gen->>Template: è¯»å–settings.json.template
    Gen->>Target: å†™å…¥.claude/settings.json

    Gen->>Template: å¤åˆ¶Hookè„šæœ¬ï¼ˆ5ä¸ª.pyï¼‰
    Gen->>Target: éƒ¨ç½²åˆ°.claude/hooks/

    Note over Gen: Layer 2 ç”Ÿæˆ
    Gen->>Gen: _generateSystemDoc() éå†Systems
    Gen->>Target: å†™å…¥markdown/systems/*.md

    Gen->>Gen: _generateAdaptiveDocs() è‡ªé€‚åº”ç»„ä»¶
    Gen->>Target: å†™å…¥markdown/components/*.md

    Note over Gen: Layer 3 ç”Ÿæˆ
    Gen->>Target: åˆ›å»ºmarkdown/core/ï¼ˆç©ºç›®å½•ï¼‰
    Gen->>Target: åˆ›å»ºmarkdown/business/ï¼ˆæ¡†æ¶ï¼‰

    Note over Gen: è½¯è¿æ¥åˆ›å»º
    Gen->>Target: åˆ›å»º.claude/core-docs/ -> upstream
```

**å…³é”®æ–¹æ³•**ï¼š

| æ–¹æ³• | èŒè´£ | è¾“å‡º |
|-----|------|-----|
| `_generateLayer1()` | ç”Ÿæˆé€šç”¨å±‚ï¼ˆå‘½ä»¤ã€Hookã€é…ç½®ï¼‰ | `.claude/` ç›®å½• |
| `_generateLayer2()` | ç”Ÿæˆæ¶æ„å±‚ï¼ˆSystemsæ–‡æ¡£ï¼‰ | `markdown/systems/` |
| `_generateAdaptiveDocs()` | è‡ªé€‚åº”ç»„ä»¶æ–‡æ¡£ | `markdown/components/` |
| `_deployHooks()` | éƒ¨ç½²Hookè„šæœ¬ | `.claude/hooks/*.py` |
| `_deployOfficialDocs()` | æ£€æŸ¥å®˜æ–¹æ–‡æ¡£çŠ¶æ€ | æ—¥å¿—è¾“å‡º |

---

#### 3.1.4 project-discovery.jsï¼ˆç»“æ„å‘ç°å™¨ï¼‰

**èŒè´£**ï¼š
- è‡ªåŠ¨å‘ç°é¡¹ç›®ä¸­çš„æ‰€æœ‰ç»„ä»¶ç±»å‹ï¼ˆæ— éœ€ç¡¬ç¼–ç ï¼‰
- æ¨æ–­ç›®å½•ç”¨é€”ï¼ˆSystems/Presets/Config/Utilityï¼‰
- è®¡ç®—ç½®ä¿¡åº¦åˆ†æ•°

**æ¨æ–­ç®—æ³•**ï¼š

```mermaid
flowchart LR
    Start[æ‰«ææ‰€æœ‰.pyæ–‡ä»¶] --> Group[æŒ‰ç›®å½•åˆ†ç»„]
    Group --> Infer[æ¨æ–­ç›®å½•ç”¨é€”]

    Infer --> Signal1[ä¿¡å·1: ç›®å½•åç§°æ¨¡å¼]
    Infer --> Signal2[ä¿¡å·2: æ–‡ä»¶å†…å®¹åˆ†æ]
    Infer --> Signal3[ä¿¡å·3: æ–‡ä»¶æ•°é‡/å¤æ‚åº¦]
    Infer --> Signal4[ä¿¡å·4: é…ç½®æ–‡ä»¶ç‰¹å¾]

    Signal1 --> Aggregate[èšåˆä¿¡å·]
    Signal2 --> Aggregate
    Signal3 --> Aggregate
    Signal4 --> Aggregate

    Aggregate --> Score{ç½®ä¿¡åº¦ >= 0.6?}
    Score -->|æ˜¯| NeedDoc[éœ€è¦æ–‡æ¡£åŒ–]
    Score -->|å¦| Skip[è·³è¿‡]

    NeedDoc --> Classify[åˆ†ç±»å­˜å‚¨]
    Classify --> SDK[sdkComponents]
    Classify --> Custom[customComponents]
    Classify --> Config[configFiles]
    Classify --> Util[utilities]

    style Start fill:#4A90E2
    style Aggregate fill:#50C878
    style NeedDoc fill:#FFD700
```

**ä¿¡å·ç±»å‹**ï¼š

| ä¿¡å·æº | æ£€æµ‹å†…å®¹ | ç½®ä¿¡åº¦æƒé‡ |
|-------|---------|----------|
| ç›®å½•åç§° | `systems/`, `presets/`, `states/` | 0.8-0.9 |
| æ–‡ä»¶å†…å®¹ | `class XXX(ServerSystem)` | 1.0 |
| æ–‡ä»¶æ•°é‡ | æ–‡ä»¶æ•° >= 3 | Ã—1.1 |
| é…ç½®ç‰¹å¾ | `*_config.py` | 1.0 |

**è¾“å‡ºç»“æ„**ï¼š
```javascript
{
  sdkComponents: {
    "path/to/systems": {
      type: "sdk-systems",
      confidence: 0.95,
      fileCount: 8
    }
  },
  customComponents: {
    "path/to/states": {
      type: "custom-component",
      subtype: "state",
      confidence: 0.85,
      fileCount: 5
    }
  },
  configFiles: { ... },
  utilities: { ... }
}
```

---

#### 3.1.5 intelligent-doc-maintenance.jsï¼ˆæ™ºèƒ½æ–‡æ¡£ç»´æŠ¤ï¼‰

**èŒè´£**ï¼š
- è‡ªåŠ¨æ¨æ–­æ–‡æ¡£æ˜ å°„å…³ç³»ï¼ˆä»£ç æ–‡ä»¶ -> æ–‡æ¡£æ–‡ä»¶ï¼‰
- æ™ºèƒ½å‘½åæ–‡æ¡£ï¼ˆAIæ¨æ–­ä¸­æ–‡åç§°ï¼‰
- è´¨é‡è¯„ä¼°ä¸æ›´æ–°å†³ç­–

**å·¥ä½œæµç¨‹**ï¼š

```mermaid
stateDiagram-v2
    [*] --> æ‰«æç»„ä»¶
    æ‰«æç»„ä»¶ --> æ¨æ–­æ˜ å°„å…³ç³»

    æ¨æ–­æ˜ å°„å…³ç³» --> æ£€æŸ¥ç°æœ‰æ–‡æ¡£

    æ£€æŸ¥ç°æœ‰æ–‡æ¡£ --> æ–‡æ¡£å­˜åœ¨: æ˜¯
    æ£€æŸ¥ç°æœ‰æ–‡æ¡£ --> æ–‡æ¡£ä¸å­˜åœ¨: å¦

    æ–‡æ¡£å­˜åœ¨ --> è¯„ä¼°è´¨é‡
    è¯„ä¼°è´¨é‡ --> é«˜è´¨é‡: score >= 3
    è¯„ä¼°è´¨é‡ --> ä½è´¨é‡: score < 3

    é«˜è´¨é‡ --> ä¿ç•™æ–‡æ¡£
    ä½è´¨é‡ --> ç”Ÿæˆæ–°æ–‡æ¡£
    æ–‡æ¡£ä¸å­˜åœ¨ --> ç”Ÿæˆæ–°æ–‡æ¡£

    ä¿ç•™æ–‡æ¡£ --> [*]
    ç”Ÿæˆæ–°æ–‡æ¡£ --> AIå‘½å
    AIå‘½å --> å†™å…¥æ–‡æ¡£
    å†™å…¥æ–‡æ¡£ --> [*]
```

**æ–‡æ¡£è´¨é‡è¯„åˆ†æ ‡å‡†**ï¼ˆ0-5åˆ†ï¼‰ï¼š

| å› ç´  | è¯„åˆ† |
|-----|------|
| æœ‰ä»£ç å—ç¤ºä¾‹ | +1 |
| æœ‰Mermaidå›¾è¡¨ | +1 |
| æœ‰ç¤ºä¾‹è¯´æ˜ | +1 |
| å†…å®¹ä¸°å¯Œï¼ˆ>500å­—ç¬¦ï¼‰ | +1 |
| é"å¾…è¡¥å……"æ¨¡æ¿ | +1 |

**AIå‘½åæ¨æ–­**ï¼š
```javascript
// ç¤ºä¾‹ï¼šShopServerSystem -> "å•†åº—æœåŠ¡ç«¯ç³»ç»Ÿ.md"
_inferChineseNameByAI(filePath, className, componentType) {
  // 1. æå–å…³é”®è¯ï¼ˆShop, Server, Systemï¼‰
  // 2. ä½¿ç”¨å†…ç½®æ˜ å°„è¡¨ç¿»è¯‘ï¼ˆShop->å•†åº—, Server->æœåŠ¡ç«¯ï¼‰
  // 3. ç»„åˆä¸ºä¸­æ–‡æ–‡ä»¶å
  // 4. è¿”å› "å•†åº—æœåŠ¡ç«¯ç³»ç»Ÿ.md"
}
```

---

#### 3.1.6 version-checker.jsï¼ˆç‰ˆæœ¬æ£€æµ‹å™¨ï¼‰

**èŒè´£**ï¼š
- æ£€æµ‹å·¥ä½œæµç‰ˆæœ¬ï¼ˆæœ¬åœ° vs ä¸Šæ¸¸ï¼‰
- è®¡ç®—æ–‡ä»¶å“ˆå¸Œï¼ˆSHA256ï¼‰
- æ£€æµ‹è¦†ç›–å±‚å†²çª
- ç®¡ç† `workflow-manifest.json`

**ç‰ˆæœ¬æ¯”è¾ƒç®—æ³•**ï¼š
```javascript
_compareVersions(v1, v2) {
  // è¯­ä¹‰åŒ–ç‰ˆæœ¬æ¯”è¾ƒï¼ˆmajor.minor.patchï¼‰
  // è¿”å›ï¼š-1ï¼ˆv1<v2ï¼‰, 0ï¼ˆç›¸ç­‰ï¼‰, 1ï¼ˆv1>v2ï¼‰

  const parts1 = v1.split('.').map(Number); // [18, 4, 0]
  const parts2 = v2.split('.').map(Number); // [18, 3, 0]

  for (let i = 0; i < Math.max(parts1.length, parts2.length); i++) {
    if (parts1[i] < parts2[i]) return -1;
    if (parts1[i] > parts2[i]) return 1;
  }
  return 0;
}
```

**å†²çªæ£€æµ‹æµç¨‹**ï¼š
1. è¯»å–ä¸Šæ¬¡åŒæ­¥æ—¶çš„åŸºçº¿å“ˆå¸Œï¼ˆä» `workflow-manifest.json`ï¼‰
2. è®¡ç®—å½“å‰ä¸Šæ¸¸çš„åŸºçº¿å“ˆå¸Œ
3. éå†è¦†ç›–å±‚æ–‡ä»¶ï¼ˆ`markdown/core/*.md`ï¼‰
4. å¦‚æœåŸºçº¿å“ˆå¸Œå˜åŒ–ï¼Œæ ‡è®°ä¸ºå†²çª
5. è¾“å‡ºå†²çªåˆ—è¡¨ï¼Œæç¤ºç”¨æˆ·åˆå¹¶

---

### 3.2 è¾…åŠ©æ¨¡å—

#### 3.2.1 indexer.jsï¼ˆæ–‡æ¡£ç´¢å¼•å™¨ï¼‰

**èŒè´£**ï¼š
- æ‰«ææ‰€æœ‰æ–‡æ¡£ï¼ˆTasks/Systems/Guidesï¼‰
- æå–å…ƒæ•°æ®ï¼ˆæ ‡ç­¾ã€å…³é”®è¯ã€å…³è”Systemsï¼‰
- æ„å»ºåå‘ç´¢å¼•ï¼ˆæ ‡ç­¾æ˜ å°„ã€å…³é”®è¯æ˜ å°„ï¼‰

**ç´¢å¼•ç»“æ„**ï¼š
```javascript
{
  tasks: [
    {
      type: 'task',
      path: 'tasks/task-001-shop-bug',
      name: 'task-001-shop-bug',
      metadata: {
        taskType: 'ğŸŸ¡ æ ‡å‡†ä»»åŠ¡',
        status: 'å·²å®Œæˆ',
        relatedSystems: ['ShopServerSystem'],
        keywords: ['å•†åº—', 'è´­ä¹°', 'é”™è¯¯']
      },
      lastModified: '2025-11-10'
    }
  ],
  tagMap: {
    'åŒç«¯é€šä¿¡': [
      { type: 'task', path: 'tasks/task-002', name: '...' }
    ]
  },
  systemMap: {
    'ShopServerSystem': [
      { type: 'task', path: 'tasks/task-001', name: '...' }
    ]
  }
}
```

**YAML Front Matter è§£æ**ï¼š
```markdown
---
type: ServerSystem
complexity: 7
detail_level: medium
lines_of_code: 350
---
```

#### 3.2.2 search-engine.jsï¼ˆæ£€ç´¢å¼•æ“ï¼‰

**èŒè´£**ï¼š
- å¤šç»´åº¦æ£€ç´¢ï¼ˆæ ‡ç­¾ã€Systemã€å…³é”®è¯ã€å…¨æ–‡ï¼‰
- ç›¸å…³åº¦æ’åº
- æ—¶é—´èŒƒå›´è¿‡æ»¤

**æŸ¥è¯¢è¯­æ³•**ï¼š
```bash
# æ ‡ç­¾æœç´¢
/mc æœç´¢ tag:åŒç«¯é€šä¿¡

# Systemæœç´¢
/mc æœç´¢ system:ShopSystem

# å…³é”®è¯æœç´¢
/mc æœç´¢ keyword:å•†åº—è´­ä¹°

# å…¨æ–‡æœç´¢
/mc æœç´¢ å•†åº—é”™è¯¯

# ç»„åˆè¿‡æ»¤
/mc æœç´¢ å•†åº— --type=task --after=2025-11-01 --limit=5
```

**ç›¸å…³åº¦ç®—æ³•**ï¼š
```javascript
_rankResults(results, query) {
  // è¯„åˆ†å› ç´ ï¼š
  // 1. åç§°å®Œå…¨åŒ¹é…ï¼š+10
  // 2. åç§°åŒ…å«ï¼š+5
  // 3. åŒ¹é…å­—æ®µï¼ˆname:+3, title:+2, keywords:+1ï¼‰
  // 4. ç±»å‹æƒé‡ï¼ˆsystem:+2, task:+1ï¼‰
  // 5. æœ€è¿‘ä¿®æ”¹ï¼ˆ<7å¤©:+3, <30å¤©:+1ï¼‰

  return results.sort((a, b) =>
    b.relevanceScore - a.relevanceScore
  );
}
```

#### 3.2.3 utils.jsï¼ˆå·¥å…·å‡½æ•°åº“ï¼‰

**æä¾›çš„å·¥å…·å‡½æ•°**ï¼š

| å‡½æ•° | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ |
|-----|------|---------|
| `ensureDir()` | é€’å½’åˆ›å»ºç›®å½• | ç”Ÿæˆæ–‡æ¡£å‰ |
| `walkDir()` | é€’å½’éå†ç›®å½• | æ‰«æPythonæ–‡ä»¶ |
| `replacePlaceholders()` | æ¨¡æ¿å ä½ç¬¦æ›¿æ¢ | ç”Ÿæˆæ–‡æ¡£ |
| `readFile()` | å®‰å…¨è¯»å–æ–‡ä»¶ï¼ˆæ”¯æŒGBKï¼‰ | Windowså…¼å®¹ |
| `normalizePathForMarkdown()` | è·¯å¾„æ ¼å¼åŒ–ï¼ˆ/é£æ ¼ï¼‰ | Markdowné“¾æ¥ |

---

## 4. æ•°æ®æµä¸äº¤äº’

### 4.1 åˆå§‹åŒ–æµç¨‹æ•°æ®æµ

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant CLI as initmcå‘½ä»¤
    participant Init as init-workflow.js
    participant Analyzer as analyzer.js
    participant Discovery as project-discovery.js
    participant Generator as generator.js
    participant FS as æ–‡ä»¶ç³»ç»Ÿ

    User->>CLI: initmc
    CLI->>Init: å¯åŠ¨åˆå§‹åŒ–

    Note over Init: æ­¥éª¤1: ç‰ˆæœ¬æ£€æµ‹
    Init->>Init: æ£€æŸ¥æ˜¯å¦éœ€è¦è¿ç§»

    Note over Init: æ­¥éª¤2: é¡¹ç›®åˆ†æ
    Init->>Analyzer: analyze()
    Analyzer->>FS: æ‰«æ.pyæ–‡ä»¶
    Analyzer->>Discovery: discover()
    Discovery-->>Analyzer: é¡¹ç›®ç»“æ„
    Analyzer-->>Init: AnalysisReport

    Note over Init: æ­¥éª¤3: æ–‡æ¡£ç”Ÿæˆ
    Init->>Generator: generateAll()
    Generator->>FS: è¯»å–templates
    Generator->>FS: å†™å…¥.claude/
    Generator->>FS: å†™å…¥markdown/
    Generator-->>Init: å®Œæˆ

    Note over Init: æ­¥éª¤4: åˆ›å»ºè½¯è¿æ¥
    Init->>FS: ln -s upstream .claude/core-docs/
    Init->>FS: ln -s upstream markdown/

    Note over Init: æ­¥éª¤5: è¾“å‡ºæŠ¥å‘Š
    Init->>User: éƒ¨ç½²å®Œæˆæ—¥å¿—
```

### 4.2 Hookå¼ºåˆ¶æ‰§è¡Œæ•°æ®æµ

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant Claude as Claude AI
    participant Hook as Hookè„šæœ¬
    participant State as workflow-state.json

    User->>Claude: /mc ä¿®å¤å•†åº—BUG
    Claude->>Hook: UserPromptSubmit
    Hook->>State: åˆå§‹åŒ–çŠ¶æ€
    State-->>Hook: çŠ¶æ€æ–‡ä»¶åˆ›å»ºæˆåŠŸ

    Note over Claude: AIå°è¯•è·³è¿‡æ–‡æ¡£æŸ¥é˜…
    Claude->>Hook: PreToolUse[Read Pythonæ–‡ä»¶]
    Hook->>State: è¯»å–æ­¥éª¤2çŠ¶æ€
    State-->>Hook: step2_doc_count = 0
    Hook-->>Claude: EXIT CODE 2ï¼ˆé˜»æ­¢ï¼‰
    Claude->>User: "éœ€è¦å…ˆé˜…è¯»â‰¥3ä¸ªæ–‡æ¡£"

    Note over Claude: AIè¢«è¿«è¯»å–æ–‡æ¡£
    Claude->>Hook: Read[å¼€å‘è§„èŒƒ.md]
    Hook->>State: PostToolUseè¿½è¸ª
    State->>State: step2_doc_count++

    Note over Claude: è¯»å–3ä¸ªæ–‡æ¡£å
    Claude->>Hook: PreToolUse[Read Pythonæ–‡ä»¶]
    Hook->>State: è¯»å–æ­¥éª¤2çŠ¶æ€
    State-->>Hook: step2_doc_count = 3
    Hook-->>Claude: EXIT CODE 0ï¼ˆå…è®¸ï¼‰

    Note over Claude: ä»»åŠ¡å®Œæˆ
    User->>Claude: ç‚¹å‡»StopæŒ‰é’®
    Claude->>Hook: Stopäº‹ä»¶
    Hook->>State: æ£€æŸ¥cleanup_completed
    State-->>Hook: False
    Hook-->>Claude: EXIT CODE 2ï¼ˆé˜»æ­¢ï¼‰
    Claude->>User: "éœ€è¦å®Œæˆæ”¶å°¾å·¥ä½œ"
```

### 4.3 æ–‡æ¡£è·¯ç”±å†³ç­–æµ

```mermaid
flowchart TD
    Start[AIéœ€è¦è¯»å–å¼€å‘è§„èŒƒ.md] --> Check1{è¦†ç›–å±‚å­˜åœ¨?}

    Check1 -->|æ˜¯| CoreOverride[markdown/core/å¼€å‘è§„èŒƒ.md]
    Check1 -->|å¦| Check2{åŸºçº¿å±‚å­˜åœ¨?}

    Check2 -->|æ˜¯| CoreBaseline[.claude/core-docs/å¼€å‘è§„èŒƒ.md]
    Check2 -->|å¦| Fallback[åœ¨çº¿æŸ¥è¯¢/æŠ¥é”™]

    CoreOverride --> Version{æ–‡ä»¶ç‰ˆæœ¬}
    Version --> |v18.4| UseOverride[ä½¿ç”¨è¦†ç›–å±‚å†…å®¹]

    CoreBaseline --> Symlink[é€šè¿‡è½¯è¿æ¥è¯»å–]
    Symlink --> Upstream[ä¸Šæ¸¸ä»“åº“æ–‡ä»¶]

    UseOverride --> AI[è¿”å›ç»™AI]
    Upstream --> AI
    Fallback --> AI

    style CoreOverride fill:#FFD700
    style CoreBaseline fill:#87CEEB
    style UseOverride fill:#50C878
```

---

## 5. å¼‚å¸¸éš”ç¦»æœºåˆ¶ (v20.2.8+)

### 5.1 è®¾è®¡èƒŒæ™¯

**é—®é¢˜æ¥æº**: v20.2.7ç‰ˆæœ¬åœ¨ä¸‹æ¸¸é¡¹ç›®å®é™…ä¼šè¯æµ‹è¯•ä¸­å‘ç°ï¼Œ`unified-workflow-driver.py` å­˜åœ¨å•ç‚¹æ•…éšœé—®é¢˜ï¼š

- **P0é—®é¢˜**: Line 878é‡å¤å¯¼å…¥datetimeå¯¼è‡´ `UnboundLocalError`ï¼Œæ•´ä¸ªHookå®Œå…¨å¤±æ•ˆ
- **å½±å“èŒƒå›´**: ä»£ç ä¿®æ”¹æé†’ã€æ”¶å°¾å·¥ä½œæµã€ä¸“å®¶è¯Šæ–­ç³»ç»Ÿå…¨éƒ¨æ— æ³•è§¦å‘
- **æ ¹æœ¬åŸå› **: ç¼ºä¹å¼‚å¸¸éš”ç¦»æœºåˆ¶ï¼Œä¸€ä¸ªæ¨¡å—å¤±è´¥å¯¼è‡´æ•´ä¸ªHookå´©æºƒ

**ä¿®å¤è¯¦æƒ…**: å‚è§ [BUGä¿®å¤å·¥ä½œæµæ‰§è¡Œé—®é¢˜åˆ†ææŠ¥å‘Š-v20.2.7.md](../../BUGä¿®å¤å·¥ä½œæµæ‰§è¡Œé—®é¢˜åˆ†ææŠ¥å‘Š-v20.2.7.md)

### 5.2 å¼‚å¸¸éš”ç¦»æ¶æ„

#### 5.2.1 äº”å¤§éš”ç¦»é˜¶æ®µ

```mermaid
flowchart TB
    Start[Hookè§¦å‘] --> Phase1

    subgraph Phase1[é˜¶æ®µ1: å·¥å…·ç‰¹å®šå¤„ç†]
        Read[Readå·¥å…·<br/>æ–‡æ¡£é˜…è¯»è®°å½•]
        WriteEdit[Write/Editå·¥å…·<br/>ä»£ç ä¿®æ”¹è®°å½•]
        Bash[Bashå·¥å…·<br/>æµ‹è¯•å¤±è´¥æ£€æµ‹]
    end

    subgraph Phase2[é˜¶æ®µ2: çŠ¶æ€æ›´æ–°]
        Timestamp[æ›´æ–°æ—¶é—´æˆ³<br/>meta.updated_at]
    end

    subgraph Phase3[é˜¶æ®µ3: æ­¥éª¤æ£€æŸ¥ä¸æ¨è¿›]
        StepCheck[æ£€æŸ¥æ­¥éª¤å®Œæˆæ¡ä»¶]
        StepAdvance[æ¨è¿›åˆ°ä¸‹ä¸€æ­¥]
        StateSync[åŒæ­¥workflow-state.json]
    end

    subgraph Phase4[é˜¶æ®µ4: å¾ªç¯æ£€æµ‹ä¸ä¸“å®¶è§¦å‘]
        LoopDetect[æ£€æµ‹bugä¿®å¤å¾ªç¯]
        ExpertTrigger[è§¦å‘ä¸“å®¶åˆ†æ]
    end

    subgraph Phase5[é˜¶æ®µ5: çŠ¶æ€ä¿å­˜]
        SaveMeta[ä¿å­˜.task-meta.json]
    end

    Phase1 -->|ç‹¬ç«‹try-catch| Phase2
    Phase2 -->|ç‹¬ç«‹try-catch| Phase3
    Phase3 -->|ç‹¬ç«‹try-catch| Phase4
    Phase4 -->|ç‹¬ç«‹try-catch| Phase5
    Phase5 --> End[è¿”å› continue: true]

    Read -.å¤±è´¥ä¸å½±å“.-> WriteEdit
    WriteEdit -.å¤±è´¥ä¸å½±å“.-> Bash

    StepCheck -.å¤±è´¥ä¸å½±å“.-> StepAdvance
    StepAdvance -.å¤±è´¥ä¸å½±å“.-> StateSync

    LoopDetect -.å¤±è´¥ä¸å½±å“.-> ExpertTrigger

    style Phase1 fill:#A8E6CF
    style Phase2 fill:#FFD93D
    style Phase3 fill:#FFB6B9
    style Phase4 fill:#C7CEEA
    style Phase5 fill:#B5EAD7
```

#### 5.2.2 éš”ç¦»ç­–ç•¥è¯¦è§£

**é˜¶æ®µ1: å·¥å…·ç‰¹å®šå¤„ç†**
```python
# Readå·¥å…·å¼‚å¸¸éš”ç¦»
if tool_name == "Read":
    try:
        file_path = data.get('tool_input', {}).get('file_path', '')
        if update_docs_read(meta, file_path):
            logger.info("æ–‡æ¡£é˜…è¯»è®°å½•å·²æ›´æ–°", {"file": file_path})
            step_changed = check_step_completed(current_step, meta)
    except Exception as read_err:
        logger.error("Readå·¥å…·å¤„ç†å¤±è´¥", read_err)
        # ç»§ç»­æ‰§è¡Œå…¶ä»–é€»è¾‘ï¼Œä¸ä¸­æ–­æµç¨‹
```

**éš”ç¦»æ•ˆæœ**:
- âŒ å¦‚æœReadå·¥å…·å¤„ç†å¤±è´¥ â†’ åªè®°å½•é”™è¯¯ï¼Œä¸å½±å“Write/Edit/Bashå¤„ç†
- âœ… Write/Edit/Bashå·¥å…·ä»ç„¶æ­£å¸¸å¤„ç†
- âœ… åç»­æ­¥éª¤æ£€æŸ¥ã€ä¸“å®¶è§¦å‘ä»ç„¶æ‰§è¡Œ

**é˜¶æ®µ2: çŠ¶æ€æ›´æ–°**
```python
try:
    meta["updated_at"] = datetime.now().isoformat()
except Exception as timestamp_err:
    logger.error("æ—¶é—´æˆ³æ›´æ–°å¤±è´¥", timestamp_err)
    # æ—¶é—´æˆ³æ›´æ–°å¤±è´¥ä¸è‡´å‘½ï¼Œä½¿ç”¨æ—§æ—¶é—´æˆ³ç»§ç»­
```

**éš”ç¦»æ•ˆæœ**:
- âŒ å¦‚æœæ—¶é—´æˆ³æ›´æ–°å¤±è´¥ â†’ ä½¿ç”¨æ—§æ—¶é—´æˆ³ç»§ç»­
- âœ… ä¸å½±å“æ­¥éª¤æ£€æŸ¥å’Œä¸“å®¶è§¦å‘

**é˜¶æ®µ3: æ­¥éª¤æ£€æŸ¥ä¸æ¨è¿›**
```python
try:
    # æ£€æŸ¥æ­¥éª¤æ˜¯å¦åˆšåˆšå®Œæˆ
    if step_changed or check_step_completed(current_step, meta):
        # æ ‡è®°å½“å‰æ­¥éª¤å®Œæˆ
        meta["workflow_state"]["steps"][current_step]["status"] = "completed"
        # è·å–ä¸‹ä¸€æ­¥
        next_step = get_next_step(current_step)
        # åŒæ­¥åˆ°workflow-state.json
        workflow_state_path = os.path.join(cwd, '.claude', 'workflow-state.json')
        # ...
except Exception as step_check_err:
    logger.error("æ­¥éª¤æ£€æŸ¥å¤±è´¥", step_check_err)
    # æ­¥éª¤æ£€æŸ¥å¤±è´¥ä¸è‡´å‘½ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–é€»è¾‘
```

**éš”ç¦»æ•ˆæœ**:
- âŒ å¦‚æœæ­¥éª¤æ£€æŸ¥å¤±è´¥ â†’ å½“å‰æ­¥éª¤çŠ¶æ€ä¸å˜
- âœ… ä¸“å®¶è§¦å‘æœºåˆ¶ä»ç„¶æ‰§è¡Œ
- âœ… çŠ¶æ€ä¿å­˜ä»ç„¶å°è¯•

**é˜¶æ®µ4: å¾ªç¯æ£€æµ‹ä¸ä¸“å®¶è§¦å‘**
```python
try:
    expert_check = check_expert_trigger(meta, cwd)

    if expert_check["should_trigger"] and not meta["metrics"].get("expert_review_triggered", False):
        # è§¦å‘ä¸“å®¶å®¡æŸ¥
        expert_prompt = launch_meta_expert(expert_check, meta, cwd, logger)
        # ...
except Exception as expert_err:
    logger.error("ä¸“å®¶è§¦å‘æ£€æŸ¥å¤±è´¥", expert_err)
    # ä¸“å®¶è§¦å‘å¤±è´¥ä¸å½±å“ä¸»æµç¨‹
```

**éš”ç¦»æ•ˆæœ**:
- âŒ å¦‚æœä¸“å®¶è§¦å‘å¤±è´¥ â†’ æœ¬æ¬¡ä¸è§¦å‘ä¸“å®¶
- âœ… ä¸å½±å“çŠ¶æ€ä¿å­˜
- âœ… ä¸‹æ¬¡ä»ç„¶æœ‰æœºä¼šè§¦å‘ä¸“å®¶

**é˜¶æ®µ5: çŠ¶æ€ä¿å­˜**
```python
try:
    save_json(meta_path, meta)
except Exception as save_err:
    logger.error("çŠ¶æ€ä¿å­˜å¤±è´¥", save_err)
    # çŠ¶æ€ä¿å­˜å¤±è´¥è§†ä¸ºä¸¥é‡é”™è¯¯ï¼Œä½†ä»ç„¶æ”¾è¡Œ
    # (é¿å…é˜»å¡ç”¨æˆ·æ“ä½œï¼ŒçŠ¶æ€å¯ä»å…¶ä»–æºæ¢å¤)
```

**éš”ç¦»æ•ˆæœ**:
- âŒ å¦‚æœçŠ¶æ€ä¿å­˜å¤±è´¥ â†’ æœ¬æ¬¡ä¿®æ”¹ä¸¢å¤±
- âœ… ä¸é˜»å¡ç”¨æˆ·æ“ä½œï¼ˆè¿”å› continue: trueï¼‰
- âœ… å¯ä» workflow-state.json æˆ– .task-active.json æ¢å¤éƒ¨åˆ†çŠ¶æ€

### 5.3 å®¹é”™çº§åˆ«å®šä¹‰

| é˜¶æ®µ | å®¹é”™çº§åˆ« | å¤±è´¥å½±å“ | æ¢å¤ç­–ç•¥ |
|-----|---------|---------|---------|
| **é˜¶æ®µ1: å·¥å…·å¤„ç†** | ğŸŸ¢ ä½é£é™© | å•ä¸ªå·¥å…·è®°å½•ä¸¢å¤± | ç‹¬ç«‹å¤„ç†ï¼Œäº’ä¸å½±å“ |
| **é˜¶æ®µ2: æ—¶é—´æˆ³** | ğŸŸ¢ ä½é£é™© | æ—¶é—´æˆ³ä¸å‡†ç¡® | ä½¿ç”¨æ—§æ—¶é—´æˆ³ç»§ç»­ |
| **é˜¶æ®µ3: æ­¥éª¤æ¨è¿›** | ğŸŸ¡ ä¸­é£é™© | æ­¥éª¤åœç•™åœ¨å½“å‰ | ä¸‹æ¬¡å·¥å…·è°ƒç”¨é‡è¯• |
| **é˜¶æ®µ4: ä¸“å®¶è§¦å‘** | ğŸŸ¡ ä¸­é£é™© | æœ¬æ¬¡ä¸è§¦å‘ä¸“å®¶ | ä¸‹æ¬¡æ»¡è¶³æ¡ä»¶é‡è¯• |
| **é˜¶æ®µ5: çŠ¶æ€ä¿å­˜** | ğŸ”´ é«˜é£é™© | æœ¬æ¬¡ä¿®æ”¹ä¸¢å¤± | ä»ä¸‰æ–‡ä»¶åŒæ­¥æ¢å¤ |

### 5.4 ä¸‰æ–‡ä»¶çŠ¶æ€åŒæ­¥æœºåˆ¶

ä¸ºäº†è¿›ä¸€æ­¥æé«˜å®¹é”™æ€§ï¼Œv20.2.7å¼•å…¥äº†**ä¸‰æ–‡ä»¶çŠ¶æ€åŒæ­¥**æœºåˆ¶ï¼š

```mermaid
graph LR
    subgraph "çŠ¶æ€æº"
        M1[.task-meta.json<br/>ä»»åŠ¡å…ƒæ•°æ®]
        M2[workflow-state.json<br/>å·¥ä½œæµçŠ¶æ€æœº]
        M3[.task-active.json<br/>æ´»è·ƒä»»åŠ¡æ ‡å¿—]
    end

    subgraph "åŒæ­¥æµç¨‹"
        S1[user-prompt-submit<br/>åˆ›å»ºæ‰€æœ‰æ–‡ä»¶]
        S2[unified-driver<br/>åŒå‘åŒæ­¥]
        S3[post-archive<br/>æ¸…ç†æ´»è·ƒæ ‡å¿—]
    end

    M1 <-->|æ­¥éª¤çŠ¶æ€| M2
    M1 <-->|ä»»åŠ¡ID| M3
    M2 -->|å½“å‰æ­¥éª¤| M3

    S1 -->|åˆå§‹åŒ–| M1
    S1 -->|åˆå§‹åŒ–| M2
    S1 -->|åˆå§‹åŒ–| M3

    S2 -->|è¯»å–| M1
    S2 -->|æ›´æ–°| M2
    S2 -->|æ›´æ–°| M3

    S3 -->|åˆ é™¤| M3

    style M1 fill:#A8E6CF
    style M2 fill:#FFD93D
    style M3 fill:#FFB6B9
```

**æ¢å¤ç­–ç•¥**:
1. å¦‚æœ `.task-meta.json` ä¿å­˜å¤±è´¥ â†’ ä» `workflow-state.json` è¯»å–æ­¥éª¤çŠ¶æ€
2. å¦‚æœ `workflow-state.json` æŸå â†’ ä» `.task-meta.json` é‡å»º
3. å¦‚æœ `.task-active.json` ä¸¢å¤± â†’ Hookè‡ªåŠ¨è·³è¿‡ï¼ˆæ— æ´»è·ƒä»»åŠ¡ï¼‰

### 5.5 éªŒè¯æ–¹æ³•

**éªŒè¯åœºæ™¯1: Readå·¥å…·å¤±è´¥éš”ç¦»**
```bash
# æ¨¡æ‹ŸReadå·¥å…·å¤„ç†å¼‚å¸¸
# é¢„æœŸ: Write/Edit/Bashå·¥å…·ä»ç„¶æ­£å¸¸å¤„ç†
```

**éªŒè¯åœºæ™¯2: æ­¥éª¤æ£€æŸ¥å¤±è´¥éš”ç¦»**
```bash
# æ¨¡æ‹Ÿcheck_step_completed()æŠ›å‡ºå¼‚å¸¸
# é¢„æœŸ: ä¸“å®¶è§¦å‘æœºåˆ¶ä»ç„¶æ‰§è¡Œ
```

**éªŒè¯åœºæ™¯3: datetimeå˜é‡ä½œç”¨åŸŸé”™è¯¯(v20.2.7 bug)**
```bash
# v20.2.7: UnboundLocalErrorå¯¼è‡´æ•´ä¸ªHookå´©æºƒ
# v20.2.8: ä¿®å¤åï¼Œå³ä½¿datetimeæ¨¡å—æœ‰é—®é¢˜ï¼Œå…¶ä»–é˜¶æ®µä»ç„¶æ‰§è¡Œ
```

**éªŒè¯ç»“æœ** (v20.2.10):
- âœ… BUGä¿®å¤ä»»åŠ¡ä¸­ï¼Œç¬¬2æ¬¡ä»£ç ä¿®æ”¹åå‡ºç°å¼¹çª—æé†’
- âœ… ç”¨æˆ·è¾“å…¥"å·²ä¿®å¤"åï¼Œä»»åŠ¡ç›®å½•ç§»åŠ¨åˆ° `tasks/å·²å½’æ¡£/`
- âœ… 2æ¬¡è´Ÿé¢åé¦ˆ+2æ¬¡åŒæ–‡ä»¶ä¿®æ”¹åï¼Œè§¦å‘ä¸“å®¶å®¡æŸ¥
- âœ… Hookæ—¥å¿—ä¸­æ—  `UnboundLocalError` å¼‚å¸¸

---

## 6. æŠ€æœ¯æ ˆ

### 6.1 æ ¸å¿ƒæŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|-----|
| **Node.js** | >=12.0.0 | è¿è¡Œæ—¶ç¯å¢ƒ |
| **JavaScript** | ES6+ | ä¸»è¦å¼€å‘è¯­è¨€ |
| **Python** | 3.x | Hookè„šæœ¬ç¼–å†™ |
| **fs-extra** | ^10.1.0 | æ–‡ä»¶ç³»ç»Ÿæ“ä½œå¢å¼º |
| **glob** | ^7.2.0 | æ–‡ä»¶åŒ¹é…æ¨¡å¼ |
| **crypto** | Nodeå†…ç½® | SHA256å“ˆå¸Œè®¡ç®— |

### 6.2 ä¾èµ–åˆ†æ

```mermaid
graph LR
    subgraph "æ ¸å¿ƒä¾èµ–"
        Node[Node.js >=12]
        FSExtra[fs-extra]
        Glob[glob]
        Crypto[crypto]
    end

    subgraph "å·¥ä½œæµæ ¸å¿ƒ"
        InitWorkflow[init-workflow.js]
        Analyzer[analyzer.js]
        Generator[generator.js]
    end

    subgraph "è¾…åŠ©æ¨¡å—"
        Utils[utils.js]
        Config[config.js]
    end

    Node --> FSExtra
    Node --> Glob
    Node --> Crypto

    InitWorkflow --> Analyzer
    InitWorkflow --> Generator

    Analyzer --> Utils
    Generator --> Utils
    Generator --> Config

    Utils --> FSExtra
```

### 6.3 æ–‡ä»¶ç»“æ„ (v20.2.10)

```
NeteaseMod-Claude/
â”œâ”€â”€ lib/                        # æ ¸å¿ƒæ¨¡å—åº“
â”‚   â”œâ”€â”€ init-workflow.js        # ä¸»å…¥å£
â”‚   â”œâ”€â”€ analyzer.js             # é¡¹ç›®åˆ†æå™¨
â”‚   â”œâ”€â”€ generator.js            # æ–‡æ¡£ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ project-discovery.js    # ç»“æ„å‘ç°å™¨
â”‚   â”œâ”€â”€ indexer.js              # æ–‡æ¡£ç´¢å¼•å™¨
â”‚   â”œâ”€â”€ search-engine.js        # æ£€ç´¢å¼•æ“
â”‚   â”œâ”€â”€ version-checker.js      # ç‰ˆæœ¬æ£€æµ‹å™¨
â”‚   â”œâ”€â”€ intelligent-doc-maintenance.js  # æ™ºèƒ½æ–‡æ¡£ç»´æŠ¤
â”‚   â”œâ”€â”€ symlink-manager.js      # è½¯è¿æ¥ç®¡ç†å™¨
â”‚   â”œâ”€â”€ config.js               # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ utils.js                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ migration-v16.js        # v16è¿ç§»è„šæœ¬
â”‚   â”œâ”€â”€ migration-v16.1.js      # v16.1è¿ç§»è„šæœ¬
â”‚   â””â”€â”€ migration-v18.js        # v18è¿ç§»è„šæœ¬
â”œâ”€â”€ templates/                  # æ¨¡æ¿åº“
â”‚   â”œâ”€â”€ .claude/
â”‚   â”‚   â”œâ”€â”€ commands/           # å‘½ä»¤æ¨¡æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ mc.md.template
â”‚   â”‚   â”‚   â”œâ”€â”€ mc-review.md.template
â”‚   â”‚   â”‚   â”œâ”€â”€ mc-perf.md.template
â”‚   â”‚   â”‚   â”œâ”€â”€ mc-docs.md.template
â”‚   â”‚   â”‚   â”œâ”€â”€ mc-why.md.template
â”‚   â”‚   â”‚   â””â”€â”€ mc-discover.md.template
â”‚   â”‚   â”œâ”€â”€ hooks/              # Hookè„šæœ¬ (v20.2æ ¸å¿ƒæ¶æ„)
â”‚   â”‚   â”‚   â”œâ”€â”€ unified-workflow-driver.py  # ç»Ÿä¸€å·¥ä½œæµé©±åŠ¨å™¨ (æ ¸å¿ƒ)
â”‚   â”‚   â”‚   â”œâ”€â”€ user-prompt-submit-hook.py  # ä»»åŠ¡åˆå§‹åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ iteration-tracker-hook.py   # è¿­ä»£è¿½è¸ª
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation-recorder.py    # ä¼šè¯å†å²è®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ generate-docs-from-conversation.py  # æ–‡æ¡£ç”Ÿæˆå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ post-archive-hook.py        # ä»»åŠ¡å½’æ¡£
â”‚   â”‚   â”‚   â”œâ”€â”€ stop-hook.py                # æ”¶å°¾éªŒè¯
â”‚   â”‚   â”‚   â”œâ”€â”€ session-start-hook.py       # ä¼šè¯åˆå§‹åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ check-critical-rules.py     # CRITICALè§„èŒƒæ£€æŸ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ enforce-step2.py            # æ­¥éª¤2å¼ºåˆ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ track-doc-reading.py        # æ–‡æ¡£è¿½è¸ª
â”‚   â”‚   â”‚   â”œâ”€â”€ enforce-cleanup.py          # æ”¶å°¾å¼ºåˆ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ pre-compact-reminder.py     # æŠ—å‹ç¼©
â”‚   â”‚   â”‚   â”œâ”€â”€ hook_logger.py              # Hookæ—¥å¿—æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ vscode_notify.py            # æ¡Œé¢é€šçŸ¥æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ workflow_config_loader.py   # é…ç½®åŠ è½½å™¨
â”‚   â”‚   â”‚   â””â”€â”€ (å…¶ä»–è¾…åŠ©Hook...)
â”‚   â”‚   â””â”€â”€ settings.json.template
â”‚   â”œâ”€â”€ markdown/               # æ–‡æ¡£æ¨¡æ¿
â”‚   â””â”€â”€ README.md.template
â”œâ”€â”€ markdown/                   # æ ¸å¿ƒæ–‡æ¡£åº“ï¼ˆä¸Šæ¸¸åŸºçº¿ï¼‰
â”‚   â”œâ”€â”€ å¼€å‘è§„èŒƒ.md
â”‚   â”œâ”€â”€ é—®é¢˜æ’æŸ¥.md
â”‚   â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docs/developer/             # å¼€å‘è€…æ–‡æ¡£
â”‚   â”œâ”€â”€ æŠ€æœ¯æ¶æ„.md
â”‚   â”œâ”€â”€ æ•°æ®æµè®¾è®¡.md
â”‚   â”œâ”€â”€ Hookæœºåˆ¶.md
â”‚   â”œâ”€â”€ é€šçŸ¥ç³»ç»Ÿ.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ bin/                        # CLIå·¥å…·
â”‚   â”œâ”€â”€ initmc.js               # åˆå§‹åŒ–å‘½ä»¤
â”‚   â”œâ”€â”€ uninstallmc.js          # å¸è½½å‘½ä»¤
â”‚   â”œâ”€â”€ merge-conflicts.js      # å†²çªåˆå¹¶å·¥å…·
â”‚   â””â”€â”€ detect-obsolete.js      # åºŸå¼ƒæ–‡ä»¶æ£€æµ‹
â”œâ”€â”€ scripts/                    # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ initmc.js               # åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ compact-claude.py       # ä¸Šä¸‹æ–‡å‹ç¼©å·¥å…·
â”‚   â”œâ”€â”€ deploy-local.js         # æœ¬åœ°éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ fix-downstream-claude-md.py  # ä¿®å¤ä¸‹æ¸¸CLAUDE.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ package.json                # npmåŒ…é…ç½® (v20.2.10)
â”œâ”€â”€ CHANGELOG.md                # ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

---

## 7. è®¾è®¡åŸåˆ™

### 7.1 æ¶æ„è®¾è®¡åŸåˆ™

#### 7.1.1 èŒè´£å•ä¸€åŸåˆ™ï¼ˆSRPï¼‰

**å®è·µ**ï¼š
- æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½
- `analyzer.js` åªåšåˆ†æï¼Œä¸åšç”Ÿæˆ
- `generator.js` åªåšç”Ÿæˆï¼Œä¸åšåˆ†æ
- `version-checker.js` åªåšç‰ˆæœ¬æ£€æµ‹ï¼Œä¸åšæ–‡ä»¶æ“ä½œ

**åä¾‹**ï¼š
```javascript
// âŒ è¿åSRPï¼ˆåˆ†æå™¨ä¸åº”è¯¥ç”Ÿæˆæ–‡æ¡£ï¼‰
class ProjectAnalyzer {
  analyze() { ... }
  generateDocs() { ... }  // è¿åèŒè´£å•ä¸€
}
```

**æ­£ä¾‹**ï¼š
```javascript
// âœ… èŒè´£æ¸…æ™°
class ProjectAnalyzer {
  analyze() { ... }  // åªåšåˆ†æ
}

class DocumentGenerator {
  generateAll() { ... }  // åªåšç”Ÿæˆ
}
```

#### 7.1.2 åˆ†å±‚æ¶æ„åŸåˆ™

**ä¸‰å±‚æ¶æ„**ï¼š

```mermaid
graph TB
    subgraph "è¡¨ç°å±‚"
        CLI[CLIå‘½ä»¤]
        Hooks[Hookè„šæœ¬]
    end

    subgraph "ä¸šåŠ¡é€»è¾‘å±‚"
        InitWorkflow[å·¥ä½œæµå¼•æ“]
        Analyzer[åˆ†æå™¨]
        Generator[ç”Ÿæˆå™¨]
    end

    subgraph "æ•°æ®è®¿é—®å±‚"
        Utils[å·¥å…·å‡½æ•°]
        FS[æ–‡ä»¶ç³»ç»Ÿ]
    end

    CLI --> InitWorkflow
    Hooks --> InitWorkflow
    InitWorkflow --> Analyzer
    InitWorkflow --> Generator
    Analyzer --> Utils
    Generator --> Utils
    Utils --> FS

    style InitWorkflow fill:#4A90E2
    style Utils fill:#50C878
```

**å±‚é—´ä¾èµ–è§„åˆ™**ï¼š
- ä¸Šå±‚å¯ä»¥ä¾èµ–ä¸‹å±‚ï¼Œä¸‹å±‚ä¸èƒ½ä¾èµ–ä¸Šå±‚
- åŒå±‚ä¹‹é—´é€šè¿‡æ¥å£é€šä¿¡
- é¿å…è·¨å±‚è°ƒç”¨

#### 7.1.3 å¯æ‰©å±•æ€§åŸåˆ™

**æ’ä»¶åŒ–è®¾è®¡**ï¼š

```javascript
// æ¨¡å—åŒ–ç»„ä»¶å‘ç°
class ComponentDiscoverer {
  constructor() {
    this.detectors = [
      new SystemDetector(),      // æ£€æµ‹Systems
      new PresetDetector(),      // æ£€æµ‹Presets
      new StateDetector(),       // æ£€æµ‹States
      // æ–°å¢æ£€æµ‹å™¨åªéœ€æ·»åŠ åˆ°æ•°ç»„
      new CustomDetector()       // è‡ªå®šä¹‰æ£€æµ‹å™¨
    ];
  }

  discover() {
    return this.detectors.map(d => d.detect());
  }
}
```

**é…ç½®é©±åŠ¨**ï¼š
```javascript
// config.js
const COMPLEXITY_THRESHOLDS = {
  detailed: 8,   // å¯è°ƒæ•´é˜ˆå€¼
  medium: 5
};

// æ–°å¢é¡¹ç›®ç±»å‹åªéœ€æ·»åŠ é…ç½®
const PROJECT_TYPE_KEYWORDS = {
  RPG: ['rpg', 'combat', 'weapon'],
  BedWars: ['bedwars', 'bed', 'generator'],
  NewType: ['keyword1', 'keyword2']  // æ‰©å±•
};
```

#### 7.1.4 ç”¨æˆ·å®šåˆ¶ä¼˜å…ˆåŸåˆ™

**è¦†ç›–å±‚æœºåˆ¶**ï¼š
```
ä¼˜å…ˆçº§ï¼š
1. markdown/core/å¼€å‘è§„èŒƒ.md        # ç”¨æˆ·å®šåˆ¶ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. .claude/core-docs/å¼€å‘è§„èŒƒ.md    # ä¸Šæ¸¸åŸºçº¿ï¼ˆå›é€€ï¼‰
3. åœ¨çº¿æŸ¥è¯¢                          # æœ€åæ‰‹æ®µ
```

**ä¿æŠ¤ç”¨æˆ·æ•°æ®**ï¼š
```javascript
// CLAUDE.md æ™ºèƒ½åˆå¹¶ï¼ˆä¿æŠ¤ç”¨æˆ·ç¼–è¾‘åŒºï¼‰
_mergeCLAUDEmd(newTemplate, existingContent) {
  // 1. æå–ç”¨æˆ·ç¼–è¾‘åŒºåŸŸï¼ˆé¡¹ç›®é…ç½®åŒºã€é¡¹ç›®æ‰©å±•åŒºï¼‰
  const projectConfig = this._extractSection(existingContent, 'é¡¹ç›®é…ç½®åŒº');
  const projectExtension = this._extractSection(existingContent, 'é¡¹ç›®æ‰©å±•åŒº');

  // 2. æå–æ–°æ¨¡æ¿çš„å·¥ä½œæµå†…å®¹
  const workflowContent = this._extractSection(newTemplate, 'å·¥ä½œæµå†…å®¹');

  // 3. ç»„è£…æ–°ç‰ˆï¼ˆç”¨æˆ·å†…å®¹ + æ–°å·¥ä½œæµï¼‰
  return this._assembleCLAUDEmd({
    projectConfig,      // ä¿ç•™ç”¨æˆ·é…ç½®
    workflowContent,    // æ›´æ–°å·¥ä½œæµ
    projectExtension    // ä¿ç•™ç”¨æˆ·æ‰©å±•
  });
}
```

### 7.2 ä»£ç è´¨é‡åŸåˆ™

#### 7.2.1 é˜²å¾¡å¼ç¼–ç¨‹

**æ–‡ä»¶æ“ä½œä¿æŠ¤**ï¼š
```javascript
function readFile(filePath, encoding = 'utf8') {
  try {
    return fs.readFileSync(filePath, encoding);
  } catch (err) {
    // é™çº§ç­–ç•¥ï¼šå°è¯•å…¶ä»–ç¼–ç 
    try {
      return fs.readFileSync(filePath, 'latin1');
    } catch (e) {
      console.error(`[å·¥å…·] æ— æ³•è¯»å–æ–‡ä»¶: ${filePath}`);
      return '';  // è¿”å›é»˜è®¤å€¼è€ŒéæŠ›å‡ºå¼‚å¸¸
    }
  }
}
```

**ç©ºå€¼æ£€æŸ¥**ï¼š
```javascript
// âœ… å®‰å…¨çš„å±æ€§è®¿é—®
const keywords = item.metadata?.keywords || item.keywords || [];

// âŒ ä¸å®‰å…¨çš„è®¿é—®
const keywords = item.metadata.keywords;  // å¯èƒ½æŠ¥é”™
```

#### 7.2.2 æ—¥å¿—æ¸…æ™°åŸåˆ™

**åˆ†çº§æ—¥å¿—**ï¼š
```javascript
console.log('[åˆ†æå™¨] å¼€å§‹åˆ†æé¡¹ç›®...');      // é˜¶æ®µæç¤º
console.log(`[åˆ†æå™¨] å‘ç° ${count} ä¸ªSystems`);  // æ•°æ®è¾“å‡º
console.warn(`[ç”Ÿæˆå™¨] âš ï¸  è­¦å‘Š: ...`);       // è­¦å‘Šä¿¡æ¯
console.error(`[å·¥å…·] æ— æ³•è¯»å–æ–‡ä»¶: ...`);     // é”™è¯¯ä¿¡æ¯
```

**è¿›åº¦å¯è§†åŒ–**ï¼š
```javascript
console.log('[ç”Ÿæˆå™¨] ========== è‡ªé€‚åº”æ–‡æ¡£ç»´æŠ¤ ==========');
console.log('[ç”Ÿæˆå™¨] âœ… æ–‡æ¡£ç”Ÿæˆå®Œæˆ');
console.log('[ç”Ÿæˆå™¨] ========== è‡ªé€‚åº”ç»´æŠ¤å®Œæˆ ==========\n');
```

#### 7.2.3 å‘åå…¼å®¹åŸåˆ™

**ç‰ˆæœ¬æ£€æµ‹**ï¼š
```javascript
// æ”¯æŒv15.xåˆ°v18.xçš„æ— æŸå‡çº§
getLocalVersion() {
  // 1. ä¼˜å…ˆæ£€æŸ¥workflow-version.jsonï¼ˆv15.xæ ¼å¼ï¼‰
  if (fs.existsSync(versionPath)) {
    const version = versionFile.version || '15.0.0';
    // æ ‡å‡†åŒ–æ ¼å¼ï¼ˆ15.0 -> 15.0.0ï¼‰
    return version.includes('.', version.indexOf('.') + 1)
      ? version
      : version + '.0';
  }

  // 2. é™çº§æ£€æŸ¥workflow-manifest.jsonï¼ˆv16.0+æ ¼å¼ï¼‰
  // ...
}
```

**è¿ç§»è„šæœ¬**ï¼š
```javascript
// migration-v18.js
class MigrationV18 {
  needsMigration() {
    // æ£€æŸ¥æ˜¯å¦éœ€è¦ä»v17.xè¿ç§»åˆ°v18.x
    return this._hasV17Structure();
  }

  async migrate() {
    // 1. å¤‡ä»½CLAUDE.md
    // 2. åˆ›å»º.claude/settings.json
    // 3. éƒ¨ç½²Hookè„šæœ¬
    // 4. æ¸…ç†æ—§æ–‡ä»¶
  }
}
```

---

## 8. æ‰©å±•æœºåˆ¶

### 8.1 æ–°å¢ç»„ä»¶ç±»å‹

**æ­¥éª¤**ï¼š

1. **æ›´æ–° `project-discovery.js`**ï¼š
```javascript
// æ·»åŠ æ–°çš„æ£€æµ‹æ¨¡å¼
_collectDirectoryNameSignals(dirName, signals) {
  const patterns = [
    // ... ç°æœ‰æ¨¡å¼
    {
      regex: /^controllers?$/i,
      type: 'custom-component',
      subtype: 'controller',
      confidence: 0.85
    }  // æ–°å¢
  ];
}

_collectFileContentSignals(files, signals) {
  const contentPatterns = [
    // ... ç°æœ‰æ¨¡å¼
    {
      regex: /class\s+\w+\s*\(\s*.*Controller\s*\)/,
      type: 'custom-component',
      subtype: 'controller',
      confidence: 0.9
    }  // æ–°å¢
  ];
}
```

2. **æ›´æ–° `intelligent-doc-maintenance.js`**ï¼š
```javascript
// æ·»åŠ æ–‡æ¡£ç”Ÿæˆæ¨¡æ¿
_generateComponentDoc(componentName, componentInfo, targetPath) {
  if (componentInfo.subtype === 'controller') {
    return this._generateControllerDoc(componentName, componentInfo);
  }
  // ... å…¶ä»–ç±»å‹
}
```

3. **æ›´æ–° `config.js`**ï¼ˆå¯é€‰ï¼‰ï¼š
```javascript
const PROJECT_TYPE_KEYWORDS = {
  // ... ç°æœ‰ç±»å‹
  MVC: ['controller', 'model', 'view']  // æ–°å¢é¡¹ç›®ç±»å‹
};
```

### 8.2 æ–°å¢å‘½ä»¤æ¨¡æ¿

**æ­¥éª¤**ï¼š

1. **åˆ›å»ºæ¨¡æ¿æ–‡ä»¶**ï¼š
```bash
# templates/.claude/commands/mc-test.md.template
```

2. **ç¼–å†™å‘½ä»¤å†…å®¹**ï¼š
```markdown
# /mc-test - å•å…ƒæµ‹è¯•ç”Ÿæˆå™¨

ä½ æ˜¯MODSDKé¡¹ç›®çš„å•å…ƒæµ‹è¯•ä¸“å®¶ã€‚å½“ç”¨æˆ·æ‰§è¡Œ `/mc-test` å‘½ä»¤æ—¶ï¼š

## ğŸ“‹ å·¥ä½œæµç¨‹

1. **æ‰«æç›®æ ‡ä»£ç **
   - è¯†åˆ«å¾…æµ‹è¯•çš„System/ç±»
   - åˆ†ææ–¹æ³•ç­¾åå’Œä¾èµ–

2. **ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹**
   - ä¸ºæ¯ä¸ªå…¬å…±æ–¹æ³•ç”Ÿæˆæµ‹è¯•
   - åŒ…å«æ­£å¸¸æƒ…å†µå’Œè¾¹ç•Œæƒ…å†µ

3. **è¾“å‡ºæµ‹è¯•æ–‡ä»¶**
   - å†™å…¥ `tests/` ç›®å½•
   - ç¬¦åˆpytestè§„èŒƒ

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

```bash
/mc-test ShopServerSystem
```
```

3. **æ³¨å†Œåˆ° `config.js`**ï¼š
```javascript
function getTemplatePath(templateName, projectType = 'General') {
  // ... ç°æœ‰å‘½ä»¤
  else if (templateName === 'mc-test.md') {
    return path.join(TEMPLATES_DIR, '.claude', 'commands', 'mc-test.md.template');
  }
}
```

4. **æ›´æ–° `generator.js`**ï¼š
```javascript
async _generateLayer1(targetPath) {
  // ... ç°æœ‰å‘½ä»¤ç”Ÿæˆ
  this._generateFromTemplate('mc-test.md', targetPath, '.claude/commands/mc-test.md', replacements);
}
```

### 8.3 æ–°å¢Hookè„šæœ¬

**æ­¥éª¤**ï¼š

1. **åˆ›å»ºHookè„šæœ¬**ï¼š
```python
# templates/.claude/hooks/validate-commit.py
#!/usr/bin/env python3
"""
CommitéªŒè¯Hook
åœ¨ç”¨æˆ·æ‰§è¡Œgit commitå‰è§¦å‘ï¼ŒéªŒè¯ä»£ç è´¨é‡
"""
import sys
import json

def main():
    # 1. è¯»å–å¾…æäº¤çš„æ–‡ä»¶åˆ—è¡¨
    # 2. è¿è¡Œä»£ç æ£€æŸ¥ï¼ˆpylint/flake8ï¼‰
    # 3. å¦‚æœä¸é€šè¿‡ï¼Œè¿”å›exit code 2ï¼ˆé˜»æ­¢æäº¤ï¼‰
    pass

if __name__ == '__main__':
    main()
```

2. **æ³¨å†Œåˆ° `settings.json.template`**ï¼š
```json
{
  "hooks": {
    "PreCommit": {
      "command": ["python", ".claude/hooks/validate-commit.py"],
      "blocking": true
    }
  }
}
```

3. **éƒ¨ç½²è„šæœ¬**ï¼ˆ`generator.js`ï¼‰ï¼š
```javascript
_deployHooks(targetPath, replacements) {
  const coreHooks = [
    // ... ç°æœ‰Hook
    'validate-commit.py'  // æ–°å¢
  ];

  for (const hookFile of coreHooks) {
    // å¤åˆ¶å¹¶è®¾ç½®æƒé™
  }
}
```

### 8.4 è‡ªå®šä¹‰åˆ†æå™¨

**æ¥å£å®šä¹‰**ï¼š
```javascript
// lib/custom-analyzer.js
class CustomAnalyzer {
  constructor(projectPath) {
    this.projectPath = projectPath;
  }

  /**
   * è‡ªå®šä¹‰åˆ†æé€»è¾‘
   * @returns {Object} åˆ†æç»“æœ
   */
  analyze() {
    // å®ç°è‡ªå®šä¹‰åˆ†æ
    return {
      customMetric: 42,
      recommendations: [...]
    };
  }
}
```

**é›†æˆåˆ°ä¸»æµç¨‹**ï¼š
```javascript
// lib/init-workflow.js
const { CustomAnalyzer } = require('./custom-analyzer');

async function main() {
  // ... æ ‡å‡†åˆ†æ
  const analyzer = new ProjectAnalyzer(targetPath);
  const report = analyzer.analyze();

  // è‡ªå®šä¹‰åˆ†æ
  const customAnalyzer = new CustomAnalyzer(targetPath);
  const customReport = customAnalyzer.analyze();

  // åˆå¹¶ç»“æœ
  report.customData = customReport;
}
```

---

## é™„å½•

### A. æœ¯è¯­è¡¨ (v20.2.10)

| æœ¯è¯­ | å®šä¹‰ |
|-----|------|
| **ä¸Šæ¸¸åŸºçº¿** | å·¥ä½œæµä»“åº“ä¸­çš„åŸå§‹æ–‡æ¡£ï¼Œé€šè¿‡è½¯è¿æ¥å¼•ç”¨ |
| **è¦†ç›–å±‚** | ç”¨æˆ·é¡¹ç›®ä¸­çš„å®šåˆ¶æ–‡æ¡£ï¼Œä¼˜å…ˆäºåŸºçº¿å±‚ |
| **è½¯è¿æ¥** | æ–‡ä»¶ç³»ç»Ÿé“¾æ¥ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªç›®å½•/æ–‡ä»¶ |
| **CRITICALè§„èŒƒ** | å¿…é¡»éµå®ˆçš„å¼€å‘è§„èŒƒï¼Œè¿åä¼šå¯¼è‡´ä¸¥é‡é”™è¯¯ |
| **Hookè„šæœ¬** | æ‹¦æˆªAIè¡Œä¸ºçš„Pythonè„šæœ¬ï¼Œå®ç°å·¥ä½œæµå¼ºåˆ¶æ‰§è¡Œ |
| **ç»Ÿä¸€å·¥ä½œæµé©±åŠ¨å™¨** | unified-workflow-driver.pyï¼Œv20.2æ ¸å¿ƒHookï¼Œè´Ÿè´£çŠ¶æ€æœºé©±åŠ¨ã€å·¥å…·åˆ†å‘ã€å¼‚å¸¸éš”ç¦» |
| **ä»»åŠ¡éš”ç¦»** | æ¯ä¸ªä»»åŠ¡ç‹¬ç«‹ç›®å½• `tasks/{task_id}/`ï¼ŒåŒ…å«å…ƒæ•°æ®ã€ä¼šè¯å†å²ã€å½’æ¡£æ–‡æ¡£ |
| **workflow-state.json** | å·¥ä½œæµçŠ¶æ€æœºæ–‡ä»¶ï¼Œè¿½è¸ªæ­¥éª¤å®Œæˆæƒ…å†µã€å¾ªç¯æ£€æµ‹æŒ‡æ ‡ |
| **.task-meta.json** | ä»»åŠ¡å…ƒæ•°æ®æ–‡ä»¶ï¼Œä¿å­˜ä»»åŠ¡IDã€ç±»å‹ã€åº¦é‡æŒ‡æ ‡ã€å·¥ä½œæµçŠ¶æ€ |
| **.task-active.json** | æ´»è·ƒä»»åŠ¡æ ‡å¿—æ–‡ä»¶ï¼Œç”¨äºå¿«é€Ÿåˆ¤æ–­æ˜¯å¦æœ‰ä»»åŠ¡æ‰§è¡Œä¸­ |
| **.conversation.jsonl** | ä¼šè¯å†å²æ–‡ä»¶ï¼Œè®°å½•æ‰€æœ‰å·¥å…·è°ƒç”¨ï¼Œæ”¯æŒè·¨ä¼šè¯æ¢å¤ (v20.2.8+) |
| **å¼‚å¸¸éš”ç¦»** | 5å¤§é˜¶æ®µç‹¬ç«‹try-catchåŒ…è£…ï¼Œé˜²æ­¢å•ç‚¹æ•…éšœå¯¼è‡´Hookå®Œå…¨å¤±æ•ˆ (v20.2.8+) |
| **ä¸‰æ–‡ä»¶åŒæ­¥** | .task-meta.json â†” workflow-state.json â†” .task-active.json çŠ¶æ€åŒæ­¥æœºåˆ¶ (v20.2.7+) |
| **è‡ªé€‚åº”å‘ç°** | æ— éœ€ç¡¬ç¼–ç ï¼Œè‡ªåŠ¨æ¨æ–­é¡¹ç›®ç»„ä»¶ç±»å‹çš„ç®—æ³• |

### B. å¸¸è§é—®é¢˜

#### Q1: å¦‚ä½•è°ƒè¯•Hookè„šæœ¬ï¼Ÿ

**ç­”**ï¼š
1. æ£€æŸ¥ `.claude/hooks/` ç›®å½•æƒé™ï¼ˆLinux/Macéœ€è¦755ï¼‰
2. æ‰‹åŠ¨æ‰§è¡ŒHookè„šæœ¬æµ‹è¯•ï¼š
   ```bash
   python .claude/hooks/enforce-step2.py
   ```
3. æŸ¥çœ‹Claude Codeæ—¥å¿—ï¼ˆé€šå¸¸åœ¨ `~/.claude/logs/`ï¼‰
4. åœ¨Hookè„šæœ¬ä¸­æ·»åŠ æ—¥å¿—è¾“å‡ºï¼š
   ```python
   import sys
   print("[DEBUG] å½“å‰çŠ¶æ€:", state, file=sys.stderr)
   ```

#### Q2: è½¯è¿æ¥åœ¨Windowsä¸Šæ— æ³•åˆ›å»ºï¼Ÿ

**ç­”**ï¼š
- Windowséœ€è¦ç®¡ç†å‘˜æƒé™åˆ›å»ºç¬¦å·é“¾æ¥
- æˆ–è€…åœ¨å¼€å‘è€…æ¨¡å¼ä¸‹è¿è¡Œ
- å·¥ä½œæµå·²å®ç°é™çº§æ–¹æ¡ˆï¼šå¦‚æœè½¯è¿æ¥å¤±è´¥ï¼Œä¼šå¤åˆ¶æ–‡ä»¶

#### Q3: å¦‚ä½•ç¦ç”¨Hookå¼ºåˆ¶æ‰§è¡Œï¼Ÿ

**ç­”**ï¼š
ç¼–è¾‘ `.claude/settings.json`ï¼Œæ³¨é‡Šæ‰ç›¸å…³Hookï¼š
```json
{
  "hooks": {
    // "PreToolUse[Read]": { ... }  // æ³¨é‡Šæ‰
  }
}
```

#### Q4: ä¸ºä»€ä¹ˆéœ€è¦å¼‚å¸¸éš”ç¦»æœºåˆ¶ï¼Ÿ(v20.2.8+)

**ç­”**ï¼š
å¼‚å¸¸éš”ç¦»æœºåˆ¶è§£å†³äº†å•ç‚¹æ•…éšœé—®é¢˜ï¼š

**é—®é¢˜åœºæ™¯** (v20.2.7 bug):
- unified-workflow-driver.py çš„ Line 878 é‡å¤å¯¼å…¥datetime
- å½“ `should_remind = False` æ—¶è§¦å‘ `UnboundLocalError`
- æ•´ä¸ªHookå´©æºƒï¼Œå¯¼è‡´ä»£ç ä¿®æ”¹æé†’ã€æ”¶å°¾å·¥ä½œæµã€ä¸“å®¶è¯Šæ–­å…¨éƒ¨å¤±æ•ˆ

**ä¿®å¤æ–¹æ¡ˆ** (v20.2.8+):
- å°†å…³é”®ä¸šåŠ¡é€»è¾‘åŒ…è£…åœ¨ç‹¬ç«‹çš„ try-catch å—ä¸­
- 5å¤§é˜¶æ®µç‹¬ç«‹å®¹é”™ï¼šå·¥å…·å¤„ç†ã€çŠ¶æ€æ›´æ–°ã€æ­¥éª¤æ¨è¿›ã€ä¸“å®¶è§¦å‘ã€çŠ¶æ€ä¿å­˜
- å•ä¸ªæ¨¡å—å¤±è´¥ä¸å½±å“å…¶ä»–æ¨¡å—

**éªŒè¯æ–¹æ³•**:
```bash
# æŸ¥çœ‹Hookæ—¥å¿—ï¼Œç¡®è®¤å„é˜¶æ®µç‹¬ç«‹æ‰§è¡Œ
grep "é˜¶æ®µ" .claude/logs/hook-*.log

# è¾“å‡ºç¤ºä¾‹:
# [INFO] é˜¶æ®µ1: Readå·¥å…·å¤„ç†æˆåŠŸ
# [ERROR] é˜¶æ®µ2: æ—¶é—´æˆ³æ›´æ–°å¤±è´¥ (ä¸å½±å“åç»­)
# [INFO] é˜¶æ®µ3: æ­¥éª¤æ¨è¿›æˆåŠŸ
# [INFO] é˜¶æ®µ4: ä¸“å®¶è§¦å‘æ£€æŸ¥æˆåŠŸ
# [INFO] é˜¶æ®µ5: çŠ¶æ€ä¿å­˜æˆåŠŸ
```

#### Q5: ä¸‰æ–‡ä»¶çŠ¶æ€åŒæ­¥æœºåˆ¶æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ(v20.2.7+)

**ç­”**ï¼š
ä¸ºäº†æé«˜å®¹é”™æ€§ï¼Œv20.2.7å¼•å…¥ä¸‰æ–‡ä»¶çŠ¶æ€åŒæ­¥ï¼š

**ä¸‰ä¸ªæ–‡ä»¶çš„èŒè´£**:
1. `.task-meta.json` - ä¸»çŠ¶æ€æºï¼ŒåŒ…å«å®Œæ•´çš„ä»»åŠ¡å…ƒæ•°æ®
2. `workflow-state.json` - å·¥ä½œæµçŠ¶æ€æœºï¼Œè¿½è¸ªæ­¥éª¤å’Œå¾ªç¯æ£€æµ‹
3. `.task-active.json` - å¿«é€ŸæŸ¥è¯¢æ ‡å¿—ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ´»è·ƒä»»åŠ¡

**åŒæ­¥æµç¨‹**:
- `user-prompt-submit-hook.py` â†’ åˆ›å»ºæ‰€æœ‰æ–‡ä»¶
- `unified-workflow-driver.py` â†’ åŒå‘åŒæ­¥ï¼ˆmeta â†” workflow-stateï¼‰
- `post-archive-hook.py` â†’ æ¸…ç† `.task-active.json`

**æ¢å¤ç­–ç•¥**:
- å¦‚æœ `.task-meta.json` ä¿å­˜å¤±è´¥ â†’ ä» `workflow-state.json` æ¢å¤
- å¦‚æœ `workflow-state.json` æŸå â†’ ä» `.task-meta.json` é‡å»º
- å¦‚æœ `.task-active.json` ä¸¢å¤± â†’ Hookè‡ªåŠ¨è·³è¿‡ï¼ˆæ— æ´»è·ƒä»»åŠ¡ï¼‰

### C. æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ç´¢å¼•ç¼“å­˜**ï¼š`doc-index.json` é¿å…æ¯æ¬¡é‡æ–°æ„å»º
2. **å¢é‡åˆ†æ**ï¼šåªåˆ†æä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼ˆè®¡åˆ’ä¸­ï¼‰
3. **å¹¶è¡Œå¤„ç†**ï¼šä½¿ç”¨ `Promise.all()` å¹¶è¡Œç”Ÿæˆæ–‡æ¡£
4. **æ‡’åŠ è½½**ï¼šæŒ‰éœ€åŠ è½½æ¨¡å—ï¼ˆrequire()æ”¾åœ¨å‡½æ•°å†…éƒ¨ï¼‰

### D. ç›¸å…³èµ„æº

- **é¡¹ç›®ä»“åº“**ï¼šhttps://github.com/jju666/NeteaseMod-Claude
- **MODSDK Wiki**ï¼šhttps://github.com/EaseCation/netease-modsdk-wiki
- **Claude Codeæ–‡æ¡£**ï¼šhttps://docs.anthropic.com/claude/docs/claude-code

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæœ¬æ–‡æ¡£ç”±é¡¹ç›®æ ¸å¿ƒå¼€å‘è€…ç»´æŠ¤ï¼Œç‰ˆæœ¬ä¸å·¥ä½œæµç‰ˆæœ¬åŒæ­¥æ›´æ–°ã€‚

**è´¡çŒ®æŒ‡å—**ï¼šæ¬¢è¿æäº¤PRæ”¹è¿›æœ¬æ–‡æ¡£ï¼Œè¯·ç¡®ä¿ï¼š
1. å›¾è¡¨ä½¿ç”¨Mermaidè¯­æ³•
2. ä»£ç ç¤ºä¾‹æœ‰å……åˆ†æ³¨é‡Š
3. ä¿æŒä¸­æ–‡ç¼–å†™é£æ ¼
