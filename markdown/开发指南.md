# å¼€å‘æŒ‡å—

> **ğŸ“ å¯¼èˆª**: [ğŸ  é¦–é¡µ](../README.md) > [ğŸ“‚ æ–‡æ¡£](../README.md#æ–‡æ¡£å¯¼èˆª) > å¼€å‘æŒ‡å—
>
> ğŸ“– å®Œæ•´çš„å¼€å‘æµç¨‹ã€ä»£ç ç¤ºä¾‹å’Œæœ€ä½³å®è·µ
>
> **ğŸ“… æœ€åæ›´æ–°**: 2025-11-09

---

## ğŸ“‹ ç›®å½•

1. [å¼€å‘å·¥ä½œæµ](#1-å¼€å‘å·¥ä½œæµ)
2. [å¦‚ä½•å‚è€ƒå®˜æ–¹æ–‡æ¡£](#2-å¦‚ä½•å‚è€ƒå®˜æ–¹æ–‡æ¡£)
3. [æ·»åŠ æ–°çš„æ¸¸æˆç³»ç»Ÿ](#3-æ·»åŠ æ–°çš„æ¸¸æˆç³»ç»Ÿ)
4. [é…ç½®ç®¡ç†](#4-é…ç½®ç®¡ç†)
5. [è°ƒè¯•ä¸æµ‹è¯•](#5-è°ƒè¯•ä¸æµ‹è¯•)
6. [å®Œæ•´å·¥ä½œæµç¤ºä¾‹](#6-å®Œæ•´å·¥ä½œæµç¤ºä¾‹)

---

## 1. å¼€å‘å·¥ä½œæµ

### 1.1 æ ‡å‡†å¼€å‘æµç¨‹

ä½¿ç”¨Claude Codeå¼€å‘æ—¶çš„æ ‡å‡†æµç¨‹ï¼š

```
1. é˜…è¯»ç›¸å…³æ–‡æ¡£ï¼ˆæ¶æ„ã€è§„èŒƒï¼‰
   â†“
2. æŸ¥çœ‹é¡¹ç›®çŠ¶æ€.mdäº†è§£åŠŸèƒ½æ¸…å•
   â†“
3. å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼ˆå¦‚éœ€è¦ï¼‰
   â†“
4. ç¼–å†™ä»£ç ï¼ˆéµå¾ªå¼€å‘è§„èŒƒï¼‰
   â†“
5. è¿è¡Œæµ‹è¯•éªŒè¯
   â†“
6. æ›´æ–°æ–‡æ¡£
```

è¯¦è§ [é¡¹ç›®çŠ¶æ€.md](./é¡¹ç›®çŠ¶æ€.md)

### 1.2 ä½¿ç”¨Claude Codeçš„ä¸‰æ­¥æµç¨‹

**æ­¥éª¤1: ç†è§£ä»»åŠ¡ä¸åˆ†çº§ï¼ˆ2åˆ†é’Ÿï¼‰**

- åˆ¤æ–­ä»»åŠ¡çº§åˆ«ï¼šå¾®ä»»åŠ¡/æ ‡å‡†ä»»åŠ¡/å¤æ‚ä»»åŠ¡
- æ£€æŸ¥å†å²ä¸Šä¸‹æ–‡ï¼š`dir tasks /b`
- å¾®ä»»åŠ¡ç›´æ¥æ‰§è¡Œï¼šè·³è¿‡æ­¥éª¤2-3

**æ­¥éª¤2: æŸ¥é˜…æ–‡æ¡£ï¼ˆä»…æ ‡å‡†/å¤æ‚ä»»åŠ¡ï¼‰**

- ä¼˜å…ˆçº§1: å¼€å‘è§„èŒƒ.mdï¼ˆCRITICALè§„èŒƒï¼‰
- ä¼˜å…ˆçº§2: é—®é¢˜æ’æŸ¥.mdï¼ˆå·²çŸ¥é—®é¢˜ï¼‰
- ä¼˜å…ˆçº§3: Systemsæ–‡æ¡£ï¼ˆç³»ç»Ÿå®ç°ï¼‰
- ä¼˜å…ˆçº§4: å®˜æ–¹æ–‡æ¡£ï¼ˆä¸ç†Ÿæ‚‰APIæ—¶ï¼‰

**æ­¥éª¤3: æ‰§è¡Œä¸æ”¶å°¾**

- æ ‡å‡†ä»»åŠ¡ï¼šåˆ›å»º5ç« æ¨¡æ¿ â†’ å®æ–½ â†’ Git commit
- å¤æ‚ä»»åŠ¡ï¼šåˆ›å»º9ç« æ¨¡æ¿ â†’ åˆ†é˜¶æ®µå®æ–½ â†’ Git commit

è¯¦è§ [CLAUDE.md](../CLAUDE.md)

### 1.3 ä»»åŠ¡åˆ†çº§å¿«é€Ÿå‚è€ƒ

| çº§åˆ« | ç‰¹å¾ | ç¤ºä¾‹ | Tokenæˆæœ¬ |
|-----|------|------|-----------|
| ğŸŸ¢ å¾®ä»»åŠ¡ | å•æ–‡ä»¶<30è¡Œ | "è°ƒæ•´é…ç½®å‚æ•°" | <2k |
| ğŸŸ¡ æ ‡å‡†ä»»åŠ¡ | 3-8æ–‡ä»¶ | "ä¿®å¤é¢„è®¾äº¤äº’" | 20-35k |
| ğŸ”´ å¤æ‚ä»»åŠ¡ | >8æ–‡ä»¶/æ¶æ„ | "æ·»åŠ æ–°ç³»ç»Ÿ" | 40-60k |

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## 2. å¦‚ä½•å‚è€ƒå®˜æ–¹æ–‡æ¡£

### 2.1 ä½•æ—¶éœ€è¦æŸ¥é˜…å®˜æ–¹æ–‡æ¡£

âœ… **åº”è¯¥æŸ¥é˜…çš„æƒ…å†µ**:
- é‡åˆ°ä¸ç†Ÿæ‚‰çš„APIæ—¶
- éœ€è¦äº†è§£ç»„ä»¶/ç³»ç»Ÿç”¨æ³•æ—¶
- æŸ¥è¯¢äº‹ä»¶å‚æ•°å’Œè¿”å›å€¼æ—¶
- æ¶‰åŠåŸç‰ˆå®ä½“ã€ç‰©å“ã€NBTæ—¶
- éœ€è¦äº†è§£åŸç‰ˆæ¸¸æˆæœºåˆ¶æ—¶

âŒ **ä¸éœ€è¦æŸ¥é˜…çš„æƒ…å†µ**:
- æœ¬åœ°æ–‡æ¡£å·²æœ‰è¯¦ç»†è¯´æ˜
- CRITICALè§„èŒƒå·²æ˜ç¡®ç¦æ­¢
- é—®é¢˜æ’æŸ¥.mdå·²æœ‰è§£å†³æ–¹æ¡ˆ

### 2.2 ç½‘æ˜“MODSDKå®˜æ–¹æ–‡æ¡£

**GitHubä»“åº“**: https://github.com/EaseCation/netease-modsdk-wiki

**æŸ¥é˜…æ–¹å¼**:

ä½¿ç”¨WebFetchå·¥å…·åœ¨çº¿è·å–æœ€æ–°æ–‡æ¡£ï¼š

```python
WebFetch(
    url="https://raw.githubusercontent.com/EaseCation/netease-modsdk-wiki/main/docs/mcdocs/1-ModAPI/...",
    prompt="æå–å…³äºNotifyToClientçš„å‚æ•°è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹"
)
```

**å¸¸ç”¨æŸ¥é˜…è·¯å¾„**:

| éœ€æ±‚ | è·¯å¾„ | ç¤ºä¾‹URL |
|------|------|---------|
| **APIæ¥å£** | `/docs/mcdocs/1-ModAPI/æ¥å£/` | `/æ¥å£/ç©å®¶/èƒŒåŒ….md` |
| **äº‹ä»¶ç³»ç»Ÿ** | `/docs/mcdocs/1-ModAPI/äº‹ä»¶/` | `/äº‹ä»¶/æœåŠ¡ç«¯äº‹ä»¶.md` |
| **ç»„ä»¶ç³»ç»Ÿ** | `/docs/mcdocs/1-ModAPI/ç»„ä»¶/` | `/ç»„ä»¶/å®ä½“ç»„ä»¶.md` |
| **æšä¸¾ç±»å‹** | `/docs/mcdocs/1-ModAPI/æšä¸¾/` | `/æšä¸¾/ItemPosType.md` |

**æŸ¥é˜…ç¤ºä¾‹**:

```python
# ç¤ºä¾‹1: æŸ¥è¯¢SetPlayerAllItems APIç”¨æ³•
WebFetch(
    url="https://raw.githubusercontent.com/EaseCation/netease-modsdk-wiki/main/docs/mcdocs/1-ModAPI/æ¥å£/ç©å®¶/èƒŒåŒ….md",
    prompt="æå–SetPlayerAllItemsæ–¹æ³•çš„å‚æ•°è¯´æ˜ã€è¿”å›å€¼å’Œä½¿ç”¨ç¤ºä¾‹"
)

# ç¤ºä¾‹2: æŸ¥è¯¢ServerPlayerJoinEventäº‹ä»¶
WebFetch(
    url="https://raw.githubusercontent.com/EaseCation/netease-modsdk-wiki/main/docs/mcdocs/1-ModAPI/äº‹ä»¶/æœåŠ¡ç«¯äº‹ä»¶.md",
    prompt="æå–ServerPlayerJoinEventçš„äº‹ä»¶æ•°æ®å­—æ®µå’Œè§¦å‘æ—¶æœº"
)
```

### 2.3 åŸºå²©ç‰ˆWiki

**GitHubä»“åº“**: https://github.com/Bedrock-OSS/bedrock-wiki

**ä½•æ—¶æŸ¥é˜…**:
- æ¶‰åŠåŸç‰ˆå®ä½“ã€ç‰©å“ã€æ–¹å—æ—¶
- NBTæ•°æ®ç»“æ„ç›¸å…³é—®é¢˜æ—¶
- éœ€è¦äº†è§£åŸç‰ˆæ¸¸æˆæœºåˆ¶æ—¶

**å¸¸ç”¨é¡µé¢**:

| éœ€æ±‚ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| **NBTç»“æ„** | `/docs/nbt/` | ç‰©å“NBTã€å®ä½“NBT |
| **å®ä½“ç»„ä»¶** | `/docs/entities/` | å®ä½“è¡Œä¸ºã€AIç»„ä»¶ |
| **ç‰©å“æ ¼å¼** | `/docs/items/` | ç‰©å“å®šä¹‰ã€å±æ€§ |
| **æ–¹å—æ ¼å¼** | `/docs/blocks/` | æ–¹å—çŠ¶æ€ã€å±æ€§ |

**æŸ¥é˜…ç¤ºä¾‹**:

```python
# ç¤ºä¾‹: æŸ¥è¯¢ç‰©å“NBTç»“æ„
WebFetch(
    url="https://raw.githubusercontent.com/Bedrock-OSS/bedrock-wiki/main/docs/nbt/items.md",
    prompt="æå–ç‰©å“NBTçš„å¿…éœ€å­—æ®µå’Œå¯é€‰å­—æ®µå®šä¹‰"
)
```

### 2.4 æŸ¥é˜…ç»“æœè®°å½•

æŸ¥é˜…å®Œå®˜æ–¹æ–‡æ¡£åï¼Œåº”åœ¨ä»»åŠ¡ä¸Šä¸‹æ–‡ä¸­è®°å½•ï¼š

```markdown
### æ ¸å¿ƒæ£€æŸ¥ç‚¹

âœ… å·²æŸ¥é˜…æ–‡æ¡£:
- å¼€å‘è§„èŒƒ.md - Systemç”Ÿå‘½å‘¨æœŸ
- ç½‘æ˜“MODSDK Wiki - NotifyToClient API

ğŸ¯ æå–åŸåˆ™:
- â›” ç¦æ­¢åœ¨__init__ä¸­è°ƒç”¨GetComponent
- âœ… åº”è¯¥åœ¨Create()ä¸­åˆå§‹åŒ–ç»„ä»¶
- ğŸ“š åŸå› : __init__æ—¶æ¸¸æˆæœªåˆå§‹åŒ–

ğŸ“„ æ–‡æ¡£ä¾æ®:
- å¼€å‘è§„èŒƒ.md:152-295
- APIæ–‡æ¡£: SetPlayerAllItemsè¿”å›å€¼ä¸ºbool

ğŸŒ å®˜æ–¹æ–‡æ¡£æŸ¥é˜…:
- æŸ¥è¯¢NotifyToClientå‚æ•°è¯´æ˜ï¼ˆæˆåŠŸï¼‰
- æŸ¥è¯¢ç‰©å“NBTç»“æ„ï¼ˆæˆåŠŸï¼‰
```

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## 3. æ·»åŠ æ–°çš„æ¸¸æˆç³»ç»Ÿ

### 3.1 Systemå¼€å‘æ¦‚è¿°

ç½‘æ˜“MODSDKä¸­ï¼ŒSystemæ˜¯æ ¸å¿ƒé€»è¾‘å•å…ƒï¼š

- **ServerSystem**: æœåŠ¡ç«¯é€»è¾‘ï¼Œæ¸¸æˆè§„åˆ™ã€æ•°æ®å¤„ç†
- **ClientSystem**: å®¢æˆ·ç«¯é€»è¾‘ï¼ŒUIæ˜¾ç¤ºã€è§†è§‰æ•ˆæœ

### 3.2 åˆ›å»ºServerSystem

**æ­¥éª¤1: åˆ›å»ºç³»ç»Ÿæ–‡ä»¶**

ä½ç½®ï¼š`Script_NeteaseMod/systems/MyNewSystem.py`

```python
# -*- coding: utf-8 -*-
"""æ–°ç³»ç»Ÿè¯´æ˜
åŠŸèƒ½: XXX
è´Ÿè´£: YYY
"""

from __future__ import print_function
import mod.server.extraServerApi as serverApi
from Script_NeteaseMod.modConfig import MOD_NAME

class MyNewSystem(serverApi.GetServerSystemCls()):
    def __init__(self, namespace, systemName):
        super(MyNewSystem, self).__init__(namespace, systemName)

        # åˆå§‹åŒ–æˆå‘˜å˜é‡
        self.players = {}
        self.config = None

        # âš ï¸ CRITICAL: æ‰‹åŠ¨è°ƒç”¨Create()
        # ç½‘æ˜“å¼•æ“ä¸ä¼šè‡ªåŠ¨è°ƒç”¨Create()ï¼Œå¿…é¡»æ‰‹åŠ¨è°ƒç”¨
        print("[MyNewSystem] æ‰‹åŠ¨è°ƒç”¨Create()å®Œæˆç³»ç»Ÿåˆå§‹åŒ–")
        self.Create()

    def Create(self):
        """ç³»ç»Ÿåˆ›å»ºæ—¶çš„åˆå§‹åŒ–é€»è¾‘"""
        print("[MyNewSystem] Create() è¢«è°ƒç”¨")

        # æ³¨å†Œäº‹ä»¶ç›‘å¬
        self.ListenForEvent(
            "Minecraft",
            serverApi.GetEngineNamespace(),
            "ServerPlayerJoinEvent",
            self.OnPlayerJoin
        )

        # åŠ è½½é…ç½®
        self.config = self._load_config()

    def Destroy(self):
        """ç³»ç»Ÿé”€æ¯æ—¶è‡ªåŠ¨è¢«å¼•æ“è°ƒç”¨"""
        print("[MyNewSystem] Destroy() è¢«è°ƒç”¨")

        # æ¸…ç†èµ„æº
        self.players.clear()
        self.config = None

    def OnPlayerJoin(self, args):
        """ç©å®¶åŠ å…¥äº‹ä»¶å¤„ç†"""
        player_id = args.get("id")
        print("[MyNewSystem] ç©å®¶åŠ å…¥:", player_id)
        self.players[player_id] = {}

    def _load_config(self):
        """åŠ è½½é…ç½®ï¼ˆç§æœ‰æ–¹æ³•ï¼‰"""
        return {}
```

**æ­¥éª¤2: æ³¨å†ŒSystem**

ä½ç½®ï¼š`Script_NeteaseMod/modConfig.py`

```python
# æœåŠ¡ç«¯Systemåˆ—è¡¨
SERVER_SYSTEMS = [
    # ... ç°æœ‰ç³»ç»Ÿ
    ("MyNewSystem", "Script_NeteaseMod.systems.MyNewSystem.MyNewSystem"),
]
```

**æ­¥éª¤3: éªŒè¯æ³¨å†Œ**

è¿è¡Œæ¸¸æˆï¼Œæ£€æŸ¥æ—¥å¿—ï¼š

```
[INFO] [MyNewSystem] æ‰‹åŠ¨è°ƒç”¨Create()å®Œæˆç³»ç»Ÿåˆå§‹åŒ–
[INFO] [MyNewSystem] Create() è¢«è°ƒç”¨
```

### 3.3 åˆ›å»ºClientSystem

**æ­¥éª¤1: åˆ›å»ºç³»ç»Ÿæ–‡ä»¶**

ä½ç½®ï¼š`Script_NeteaseMod/systems/MyNewClientSystem.py`

```python
# -*- coding: utf-8 -*-
"""æ–°å®¢æˆ·ç«¯ç³»ç»Ÿè¯´æ˜
åŠŸèƒ½: XXX
è´Ÿè´£: UIæ˜¾ç¤ºã€è§†è§‰æ•ˆæœ
"""

from __future__ import print_function
import mod.client.extraClientApi as clientApi
from Script_NeteaseMod.modConfig import MOD_NAME

class MyNewClientSystem(clientApi.GetClientSystemCls()):
    def __init__(self, namespace, systemName):
        super(MyNewClientSystem, self).__init__(namespace, systemName)

        # åˆå§‹åŒ–æˆå‘˜å˜é‡
        self.ui_comp = None

        # âš ï¸ CRITICAL: æ‰‹åŠ¨è°ƒç”¨Create()
        print("[MyNewClientSystem] æ‰‹åŠ¨è°ƒç”¨Create()å®Œæˆç³»ç»Ÿåˆå§‹åŒ–")
        self.Create()

    def Create(self):
        """ç³»ç»Ÿåˆ›å»ºæ—¶çš„åˆå§‹åŒ–é€»è¾‘"""
        print("[MyNewClientSystem] Create() è¢«è°ƒç”¨")

        # è·å–UIç»„ä»¶
        self.ui_comp = self.GetComponent("Minecraft", "ui")

        # æ³¨å†Œå®¢æˆ·ç«¯äº‹ä»¶
        self.ListenForEvent(
            MOD_NAME,
            serverApi.GetEngineNamespace(),
            "MyCustomEvent",
            self.OnCustomEvent
        )

    def Destroy(self):
        """ç³»ç»Ÿé”€æ¯æ—¶è‡ªåŠ¨è¢«å¼•æ“è°ƒç”¨"""
        print("[MyNewClientSystem] Destroy() è¢«è°ƒç”¨")
        self.ui_comp = None

    def OnCustomEvent(self, args):
        """è‡ªå®šä¹‰äº‹ä»¶å¤„ç†"""
        data = args.get("data")
        print("[MyNewClientSystem] æ”¶åˆ°äº‹ä»¶:", data)
```

**æ­¥éª¤2: æ³¨å†ŒClientSystem**

ä½ç½®ï¼š`Script_NeteaseMod/modConfig.py`

```python
# å®¢æˆ·ç«¯Systemåˆ—è¡¨
CLIENT_SYSTEMS = [
    # ... ç°æœ‰ç³»ç»Ÿ
    ("MyNewClientSystem", "Script_NeteaseMod.systems.MyNewClientSystem.MyNewClientSystem"),
]
```

### 3.4 åŒç«¯é€šä¿¡å®ç°

**æœåŠ¡ç«¯å‘é€äº‹ä»¶åˆ°å®¢æˆ·ç«¯**:

```python
# å‘é€ç»™å•ä¸ªç©å®¶
self.NotifyToClient(player_id, "MyCustomEvent", {"data": "Hello"})

# å¹¿æ’­ç»™æ‰€æœ‰ç©å®¶
self.BroadcastToAllClient("MyCustomEvent", {"data": "Hello"})
```

**å®¢æˆ·ç«¯å‘é€äº‹ä»¶åˆ°æœåŠ¡ç«¯**:

```python
# å‘é€ç»™æœåŠ¡ç«¯
self.NotifyToServer("MyServerEvent", {"data": "Hello from client"})
```

**âš ï¸ CRITICALè§„èŒƒ**:

- âŒ ç¦æ­¢åœ¨æœåŠ¡ç«¯GetSystemè·å–å®¢æˆ·ç«¯ç³»ç»Ÿ
- âŒ ç¦æ­¢åœ¨å®¢æˆ·ç«¯GetSystemè·å–æœåŠ¡ç«¯ç³»ç»Ÿ
- âœ… ä½¿ç”¨NotifyToClient/NotifyToServeré€šä¿¡

è¯¦è§ [å¼€å‘è§„èŒƒ.md - åŒç«¯éš”ç¦»åŸåˆ™](./å¼€å‘è§„èŒƒ.md#åŒç«¯éš”ç¦»åŸåˆ™)

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## 4. é…ç½®ç®¡ç†

### 4.1 modConfig.pyç»“æ„

ä½ç½®ï¼š`Script_NeteaseMod/modConfig.py`

```python
# -*- coding: utf-8 -*-
"""æ¨¡ç»„é…ç½®æ–‡ä»¶"""

# ===== åŸºç¡€ä¿¡æ¯ =====
MOD_NAME = "Script_NeteaseMod"
MOD_VERSION = "1.0.0"

# ===== æœåŠ¡ç«¯Systemæ³¨å†Œ =====
SERVER_SYSTEMS = [
    ("MySystem", "Script_NeteaseMod.systems.MySystem.MySystem"),
]

# ===== å®¢æˆ·ç«¯Systemæ³¨å†Œ =====
CLIENT_SYSTEMS = [
    ("MyClientSystem", "Script_NeteaseMod.systems.MyClientSystem.MyClientSystem"),
]

# ===== æœåŠ¡ç«¯Presetç±»å‹æ³¨å†Œ =====
SERVER_PRESET_TYPES = [
    ("my_preset", "Script_NeteaseMod.presets.server.MyPresetDefServer.MyPresetDefServer"),
]

# ===== å®¢æˆ·ç«¯Presetç±»å‹æ³¨å†Œ =====
CLIENT_PRESET_TYPES = [
    ("my_preset", "Script_NeteaseMod.presets.client.MyPresetDefClient.MyPresetDefClient"),
]
```

### 4.2 é…ç½®æ–‡ä»¶ç»„ç»‡

**æ¨èç›®å½•ç»“æ„**:

```
Script_NeteaseMod/
â”œâ”€â”€ modConfig.py          # ä¸»é…ç½®
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ game_config.py    # æ¸¸æˆé…ç½®
â”‚   â”œâ”€â”€ shop_config.py    # å•†åº—é…ç½®
â”‚   â””â”€â”€ item_config.py    # ç‰©å“é…ç½®
```

**ç¤ºä¾‹ï¼šå•†åº—é…ç½®**

ä½ç½®ï¼š`Script_NeteaseMod/config/shop_config.py`

```python
# -*- coding: utf-8 -*-
"""å•†åº—é…ç½®"""

from __future__ import print_function

# å•†åº—å•†å“é…ç½®
SHOP_ITEMS = {
    "diamond_sword": {
        "name": u"é’»çŸ³å‰‘",
        "item": "minecraft:diamond_sword",
        "price": 15,
        "currency": "diamond"
    },
    "iron_block": {
        "name": u"é“å—",
        "item": "minecraft:iron_block",
        "price": 10,
        "currency": "iron"
    }
}

# å•†åº—çª—å£é…ç½®
SHOP_CATEGORIES = [
    {
        "id": "weapons",
        "name": u"æ­¦å™¨",
        "items": ["diamond_sword", "iron_sword"]
    },
    {
        "id": "blocks",
        "name": u"æ–¹å—",
        "items": ["iron_block", "wool"]
    }
]
```

### 4.3 é…ç½®å¯¼å…¥è§„èŒƒ âš ï¸ CRITICAL

```python
# âœ… æ­£ç¡®ï¼šåœ¨modMain.pyåŒçº§æ–‡ä»¶ä¸­ä½¿ç”¨ç›¸å¯¹å¯¼å…¥
from modConfig import MOD_NAME, MOD_VERSION

# âœ… æ­£ç¡®ï¼šåœ¨å­ç›®å½•æ–‡ä»¶ä¸­ä½¿ç”¨å®Œæ•´è·¯å¾„
from Script_NeteaseMod.modConfig import MOD_NAME
from Script_NeteaseMod.config.shop_config import SHOP_ITEMS

# âŒ é”™è¯¯ï¼šåœ¨å­ç›®å½•ä¸­ä½¿ç”¨ç›¸å¯¹å¯¼å…¥
from modConfig import MOD_NAME  # ImportError!
```

è¯¦è§ [å¼€å‘è§„èŒƒ.md - æ¨¡å—å¯¼å…¥è§„èŒƒ](./å¼€å‘è§„èŒƒ.md#æ¨¡å—å¯¼å…¥è§„èŒƒ-critical)

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## 5. è°ƒè¯•ä¸æµ‹è¯•

### 5.1 æ—¥å¿—è¾“å‡ºæŠ€å·§

**æ¨èçš„æ—¥å¿—æ ¼å¼**:

```python
# âœ… æ¨èæ ¼å¼
print("[INFO] [ç³»ç»Ÿå] æ¶ˆæ¯å†…å®¹")
print("[ERROR] [ç³»ç»Ÿå] é”™è¯¯ä¿¡æ¯")
print("[DEBUG] [ç³»ç»Ÿå] è°ƒè¯•ä¿¡æ¯")

# ç¤ºä¾‹
print("[INFO] [MyGameSystem] ç©å®¶åŠ å…¥:", player_id)
print("[ERROR] [MySystem] æ•°æ®ä¸å­˜åœ¨:", data_id)
print("[DEBUG] [DataModule] æ•°æ®å†…å®¹:", data)
```

**æ—¥å¿—çº§åˆ«æ§åˆ¶**:

```python
DEBUG = True  # å¼€å‘ç¯å¢ƒè®¾ä¸ºTrueï¼Œç”Ÿäº§ç¯å¢ƒè®¾ä¸ºFalse

def log_debug(msg):
    if DEBUG:
        print("[DEBUG] [MySystem]", msg)

# ä½¿ç”¨
log_debug("è°ƒè¯•ä¿¡æ¯")  # ç”Ÿäº§ç¯å¢ƒä¸è¾“å‡º
```

### 5.2 å¸¸ç”¨è°ƒè¯•å‘½ä»¤

**æ¸¸æˆå†…å‘½ä»¤**:

```bash
# ä¼ é€ç©å®¶
/tp <player> <x> <y> <z>

# ç»™äºˆç‰©å“
/give <player> <item> [amount]

# åˆ‡æ¢æ¸¸æˆæ¨¡å¼
/gamemode <mode> <player>

# æ’­æ”¾éŸ³æ•ˆ
/playsound <sound> <player> [pos] [volume] [pitch]

# æ˜¾ç¤ºTitle
/title <player> title <text>
/title <player> subtitle <text>
```

**Pythonè°ƒè¯•æŠ€å·§**:

```python
# æ‰“å°å˜é‡ç±»å‹å’Œå€¼
print("[DEBUG] type(obj):", type(obj), "value:", obj)

# æ‰“å°å­—å…¸å†…å®¹
import json
print("[DEBUG] data:", json.dumps(data, indent=2))

# å¼‚å¸¸æ•è·
try:
    # ä½ çš„ä»£ç 
    do_something()
except Exception as e:
    print("[ERROR] å‘ç”Ÿå¼‚å¸¸:", e)
    import traceback
    traceback.print_exc()
```

### 5.3 æ€§èƒ½åˆ†æ

**Tickæ€§èƒ½ä¼˜åŒ–**:

```python
# âœ… æ­£ç¡®ï¼šä½¿ç”¨è®¡æ•°å™¨é™ä½é¢‘ç‡
class MySystem(ServerSystem):
    def __init__(self, namespace, systemName):
        super(MySystem, self).__init__(namespace, systemName)
        self.tick_counter = 0
        self.Create()

    def Update(self):
        """æ¯tickè°ƒç”¨"""
        self.tick_counter += 1

        # æ¯20 tickï¼ˆ1ç§’ï¼‰æ‰§è¡Œä¸€æ¬¡
        if self.tick_counter % 20 == 0:
            self.expensive_operation()

    def expensive_operation(self):
        """è€—æ—¶æ“ä½œ"""
        pass

# âŒ é”™è¯¯ï¼šæ¯tickéƒ½æ‰§è¡Œè€—æ—¶æ“ä½œ
class MySystem(ServerSystem):
    def Update(self):
        self.expensive_operation()  # æ€§èƒ½é—®é¢˜ï¼
```

**æ—¶é—´æµ‹é‡**:

```python
import time

start_time = time.time()
# æ‰§è¡Œæ“ä½œ
do_something()
elapsed_time = time.time() - start_time
print("[DEBUG] è€—æ—¶:", elapsed_time, "ç§’")
```

### 5.4 éªŒè¯æ–¹æ³•

**åŠŸèƒ½éªŒè¯æ¸…å•**:

- [ ] ç³»ç»Ÿæ˜¯å¦æ­£ç¡®æ³¨å†Œï¼ˆæ£€æŸ¥æ—¥å¿—ï¼‰
- [ ] äº‹ä»¶ç›‘å¬æ˜¯å¦ç”Ÿæ•ˆï¼ˆè§¦å‘äº‹ä»¶éªŒè¯ï¼‰
- [ ] æ•°æ®æ˜¯å¦æ­£ç¡®å­˜å‚¨ï¼ˆæŸ¥è¯¢éªŒè¯ï¼‰
- [ ] UIæ˜¯å¦æ­£ç¡®æ˜¾ç¤ºï¼ˆå®¢æˆ·ç«¯éªŒè¯ï¼‰
- [ ] æ€§èƒ½æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼ˆå‹åŠ›æµ‹è¯•ï¼‰

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## 6. å®Œæ•´å·¥ä½œæµç¤ºä¾‹

### 6.1 æ¡ˆä¾‹1: æ·»åŠ å•†åº—ç³»ç»Ÿ

**ä»»åŠ¡æè¿°**: å®ç°ä¸€ä¸ªç®€å•çš„å•†åº—ç³»ç»Ÿï¼Œç©å®¶å¯ä»¥è´­ä¹°ç‰©å“ã€‚

**ä»»åŠ¡åˆ†çº§**: ğŸŸ¡ æ ‡å‡†ä»»åŠ¡ï¼ˆ3-8æ–‡ä»¶ï¼‰

**æ­¥éª¤1: ç†è§£ä»»åŠ¡**

- éœ€è¦æ–‡ä»¶ï¼šShopSystem.py, shop_config.py
- é¢„è®¡è¡Œæ•°ï¼šçº¦200è¡Œ
- ä»»åŠ¡çº§åˆ«ï¼šæ ‡å‡†ä»»åŠ¡ï¼Œä½¿ç”¨5ç« æ¨¡æ¿

**æ­¥éª¤2: æŸ¥é˜…æ–‡æ¡£**

```markdown
âœ… å·²æŸ¥é˜…æ–‡æ¡£:
- å¼€å‘è§„èŒƒ.md - Systemç”Ÿå‘½å‘¨æœŸã€æ¨¡å—å¯¼å…¥è§„èŒƒ
- é—®é¢˜æ’æŸ¥.md - å•†åº—é…ç½®æ¡ˆä¾‹

ğŸ¯ æå–åŸåˆ™:
- â›” ç¦æ­¢åœ¨__init__ä¸­è°ƒç”¨GetComponent
- âœ… åº”è¯¥åœ¨Create()ä¸­åˆå§‹åŒ–ç»„ä»¶
- âœ… é…ç½®æ–‡ä»¶ä½¿ç”¨from...importå¯¼å…¥

ğŸ“„ æ–‡æ¡£ä¾æ®:
- å¼€å‘è§„èŒƒ.md:152-295 (Systemç”Ÿå‘½å‘¨æœŸ)
- å¼€å‘è§„èŒƒ.md:296-500 (æ¨¡å—å¯¼å…¥è§„èŒƒ)
```

**æ­¥éª¤3: æ‰§è¡Œå¼€å‘**

**3.1 åˆ›å»ºé…ç½®æ–‡ä»¶**

`Script_NeteaseMod/config/shop_config.py`:

```python
# -*- coding: utf-8 -*-
"""å•†åº—é…ç½®"""

SHOP_ITEMS = {
    "diamond_sword": {
        "name": u"é’»çŸ³å‰‘",
        "item": "minecraft:diamond_sword",
        "price": 15,
        "currency": "diamond"
    }
}
```

**3.2 åˆ›å»ºSystemæ–‡ä»¶**

`Script_NeteaseMod/systems/ShopSystem.py`:

```python
# -*- coding: utf-8 -*-
"""å•†åº—ç³»ç»Ÿ"""

from __future__ import print_function
import mod.server.extraServerApi as serverApi
from Script_NeteaseMod.modConfig import MOD_NAME
from Script_NeteaseMod.config.shop_config import SHOP_ITEMS

class ShopSystem(serverApi.GetServerSystemCls()):
    def __init__(self, namespace, systemName):
        super(ShopSystem, self).__init__(namespace, systemName)
        self.shops = {}
        self.Create()

    def Create(self):
        print("[ShopSystem] Create() è¢«è°ƒç”¨")
        self.ListenForEvent(
            MOD_NAME,
            serverApi.GetEngineNamespace(),
            "BuyItemEvent",
            self.OnBuyItem
        )

    def OnBuyItem(self, args):
        player_id = args.get("player_id")
        item_id = args.get("item_id")

        if item_id not in SHOP_ITEMS:
            print("[ERROR] [ShopSystem] å•†å“ä¸å­˜åœ¨:", item_id)
            return

        item_config = SHOP_ITEMS[item_id]
        # è´­ä¹°é€»è¾‘...
        print("[ShopSystem] ç©å®¶è´­ä¹°:", player_id, item_id)
```

**3.3 æ³¨å†ŒSystem**

`Script_NeteaseMod/modConfig.py`:

```python
SERVER_SYSTEMS = [
    # ... ç°æœ‰ç³»ç»Ÿ
    ("ShopSystem", "Script_NeteaseMod.systems.ShopSystem.ShopSystem"),
]
```

**3.4 éªŒè¯ç»“æœ**

è¿è¡Œæ¸¸æˆï¼Œæ£€æŸ¥æ—¥å¿—ï¼š

```
[INFO] [ShopSystem] Create() è¢«è°ƒç”¨
[INFO] [ShopSystem] ç©å®¶è´­ä¹°: -4294967295 diamond_sword
```

**3.5 Gitæäº¤**

```bash
git add .
git commit -m "feat: æ·»åŠ å•†åº—ç³»ç»Ÿ

- æ–°å¢ShopSystemæœåŠ¡ç«¯ç³»ç»Ÿ
- æ–°å¢shop_config.pyé…ç½®æ–‡ä»¶
- å®ç°å•†å“è´­ä¹°é€»è¾‘

ğŸ¤– Generated with Claude Code(https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

### 6.2 æ¡ˆä¾‹2: ä¿®å¤Systemç”Ÿå‘½å‘¨æœŸBUG

**ä»»åŠ¡æè¿°**: ä¿®å¤MySystemåˆå§‹åŒ–é”™è¯¯ï¼ŒGetComponentè¿”å›Noneã€‚

**ä»»åŠ¡åˆ†çº§**: ğŸŸ¢ å¾®ä»»åŠ¡ï¼ˆå•æ–‡ä»¶<30è¡Œï¼‰

**æ­¥éª¤1: å¿«é€Ÿé€šé“**

ç›´æ¥è·³è¿‡æŸ¥é˜…æ–‡æ¡£ï¼Œä½¿ç”¨Editå·¥å…·ä¿®å¤ã€‚

**æ­¥éª¤2: è¯Šæ–­é—®é¢˜**

æŸ¥çœ‹ä»£ç ï¼š

```python
class MySystem(ServerSystem):
    def __init__(self, namespace, systemName):
        super(MySystem, self).__init__(namespace, systemName)
        # âŒ é”™è¯¯ï¼šåœ¨__init__ä¸­è°ƒç”¨GetComponent
        self.comp = self.GetComponent("Minecraft", "item")
```

**æ­¥éª¤3: ä¿®å¤ä»£ç **

```python
class MySystem(ServerSystem):
    def __init__(self, namespace, systemName):
        super(MySystem, self).__init__(namespace, systemName)
        self.comp = None
        self.Create()  # âœ… æ‰‹åŠ¨è°ƒç”¨Create()

    def Create(self):
        # âœ… åœ¨Createä¸­åˆå§‹åŒ–ç»„ä»¶
        self.comp = self.GetComponent("Minecraft", "item")
```

**æ­¥éª¤4: Gitæäº¤**

```bash
git add .
git commit -m "fix: ä¿®å¤MySystemåˆå§‹åŒ–é”™è¯¯

éµå¾ªCRITICALè§„èŒƒï¼Œåœ¨Create()ä¸­åˆå§‹åŒ–ç»„ä»¶

ğŸ¤– Generated with Claude Code(https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### é‡è¦å‚è€ƒ

- [å¼€å‘è§„èŒƒ](./å¼€å‘è§„èŒƒ.md) - CRITICALè§„èŒƒï¼Œé¿å…å¸¸è§é”™è¯¯ï¼ˆå¿…è¯»ï¼‰
- [é—®é¢˜æ’æŸ¥](./é—®é¢˜æ’æŸ¥.md) - å·²çŸ¥é—®é¢˜è§£å†³æ–¹æ¡ˆ
- [å¿«é€Ÿå¼€å§‹](./å¿«é€Ÿå¼€å§‹.md) - ç¯å¢ƒé…ç½®å’Œå¿«é€Ÿå…¥é—¨

### æ¶æ„æ–‡æ¡£

- [CLAUDE.md](../CLAUDE.md) - AIå·¥ä½œæµç¨‹å‚è€ƒ
- [é¡¹ç›®çŠ¶æ€](./é¡¹ç›®çŠ¶æ€.md) - åŠŸèƒ½æ¸…å•å’Œå¼€å‘è¿›åº¦

### AIè¾…åŠ©æ–‡æ¡£

- [ä»»åŠ¡ç±»å‹å†³ç­–è¡¨](./ai/ä»»åŠ¡ç±»å‹å†³ç­–è¡¨.md) - ä»»åŠ¡åˆ†çº§æŒ‡å—
- [å¿«é€Ÿé€šé“æµç¨‹](./ai/å¿«é€Ÿé€šé“æµç¨‹.md) - å¾®ä»»åŠ¡æ‰§è¡Œ
- [ä¸Šä¸‹æ–‡ç®¡ç†è§„èŒƒ](./ai/ä¸Šä¸‹æ–‡ç®¡ç†è§„èŒƒ.md) - Tasksç›®å½•ç®¡ç†

### å®˜æ–¹èµ„æº

- [ç½‘æ˜“MODSDK Wiki](https://github.com/EaseCation/netease-modsdk-wiki) - å®˜æ–¹APIæ–‡æ¡£
- [åŸºå²©ç‰ˆWiki](https://github.com/Bedrock-OSS/bedrock-wiki) - åŸç‰ˆæœºåˆ¶å‚è€ƒ

---

**[â¬†ï¸ è¿”å›é¡¶éƒ¨](#å¼€å‘æŒ‡å—)** | **[ğŸ  è¿”å›é¦–é¡µ](../README.md)** | **[â¡ï¸ é¡¹ç›®çŠ¶æ€](./é¡¹ç›®çŠ¶æ€.md)**

---

_æœ€åæ›´æ–°: 2025-11-09 | æ–‡æ¡£ç‰ˆæœ¬: 1.0_
