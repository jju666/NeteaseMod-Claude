# 快速开始

> **基于Claude的MODSDK开发工作流 快速入门指南**
>
> 5分钟快速上手AI辅助开发

---

## 🎯 学习路径

### 完全新手？

1. **[安装与配置.md](../安装与配置.md)** - 先配置环境（15分钟）
2. **回到本文** - 了解基本流程（5分钟）
3. **[Claude指令参考.md](../Claude指令参考.md)** - 掌握常用命令（速查）

### 环境已配置？

直接往下看，5分钟学会使用！

---

## ⚡ 三步开始开发

### 步骤1：打开项目

```bash
# 在VSCode中打开你的MODSDK项目目录
code your-mod-project
```

### 步骤2：执行第一个任务

```bash
# 使用/cc命令
/cc 创建一个ServerSystem，监听玩家加入游戏事件并发送欢迎消息
```

### 步骤3：等待AI完成

Claude会自动：
- 📖 查阅MODSDK官方文档和本地文档
- ⚠️ 遵循CRITICAL规范（双端隔离、System生命周期）
- ✏️ 编写符合规范的代码
- 🔥 使用热重载机制快速测试
- 📝 创建Git commit

完成！就这么简单！

---

## 📋 常用指令速查

### 核心指令

```bash
# 执行任务
/cc [任务描述]

# 搜索文档
/cc 搜索 [关键词]

# 归档任务
/cc 归档 [任务名]
```

### 实用示例

```bash
# 修复BUG
/cc 修复System初始化错误，GetComponent返回None

# 添加功能
/cc 添加玩家死亡事件监听，在聊天栏显示死亡原因

# 双端通信
/cc 创建客户端UI按钮，点击时向服务端发送事件

# EventData调试
/cc 修复EventData序列化错误，tuple改为list

# 查询文档
/cc 解释双端隔离原则
```

完整指令说明：[Claude指令参考.md](../Claude指令参考.md)

---

## ⚠️ 必知规范（防止90%错误）

开发前必须了解的CRITICAL规范：

### 1. 双端隔离原则

**禁止**: 跨端GetSystem（会返回None）
**应该**: 使用NotifyToClient/NotifyToServer通信

```python
# ❌ 错误（服务端代码中）
ui_system = self.GetSystem("MyUIClientSystem")  # 返回None！

# ✅ 正确
self.NotifyToClient(player_id, "OpenUI", {"ui_type": "shop"})
```

**原因**: Server和Client运行在不同进程中，无法直接GetSystem

### 2. System生命周期

**禁止**: 在__init__中调用GetComponent/GetEntity
**应该**: 在Create()中初始化组件

```python
def __init__(self, namespace, systemName):
    ServerSystem.__init__(self, namespace, systemName)
    self.gameComp = None  # 只声明
    self.Create()         # ⚠️ 必须手动调用！

def Create(self):
    """✅ 安全的初始化位置"""
    levelId = serverApi.GetLevelId()
    self.gameComp = serverApi.GetEngineCompFactory().CreateGame(levelId)
```

**原因**: __init__时游戏环境未初始化，实体/组件未注册

### 3. EventData序列化限制

**禁止**: EventData中使用tuple
**应该**: 使用list、dict、基础类型

```python
# ❌ 错误
data = self.CreateEventData()
data["position"] = (100, 64, 100)  # tuple不支持序列化!

# ✅ 正确
data["position"] = [100, 64, 100]  # 使用list
```

**支持类型**: dict, list, str, int, float, bool

### 4. 模块导入规范

**应该**: 子目录使用完整路径导入

```python
# ✅ 正确（根目录文件）
from modConfig import MOD_NAME

# ✅ 正确（子目录文件）
from myMod.modConfig import MOD_NAME

# ❌ 错误（子目录文件）
import modConfig  # 会导入失败!
```

**完整规范**: [开发规范.md](./开发规范.md)

---

## 🔥 热重载机制（快速测试）

MODSDK支持热重载，无需重启游戏即可测试代码修改：

### 使用方法

```bash
# 游戏内聊天栏输入
/reload
```

### 适用场景

- ✅ System逻辑修改
- ✅ 事件监听修改
- ✅ Component使用修改
- ❌ 配置文件修改（需重启游戏）
- ❌ 新增System（需重启游戏）

### 开发流程

```
1. 编写代码
2. /reload 重载
3. 游戏内测试
4. 重复 1-3
5. 提交Git commit
```

---

## 📚 进阶学习

### 深入学习文档

| 文档 | 何时阅读 |
|------|----------|
| **[Claude指令参考.md](../Claude指令参考.md)** | 想了解更多指令用法 |
| **[开发规范.md](./开发规范.md)** | 深入学习所有CRITICAL规范 |
| **[问题排查.md](./问题排查.md)** | 遇到BUG需要调试 |
| **[开发指南.md](./开发指南.md)** | 学习完整开发工作流 |

### 官方资源

- **网易MODSDK Wiki**: https://github.com/EaseCation/netease-modsdk-wiki
- **基岩版Wiki**: https://github.com/Bedrock-OSS/bedrock-wiki

Claude会自动使用WebFetch查询这些文档，你也可以手动查阅。

---

## 💡 实用技巧

### 1. 任务分类自动识别

Claude会自动识别任务类型：

- 🟢 **微任务**（<30行）- 直接修改，<2分钟
- 🟡 **标准任务**（3-8文件）- 创建任务记录，分步实施
- 🔴 **复杂任务**（>8文件）- 完整规划，文档化

你只需描述任务，Claude会自动选择最优流程！

### 2. 模糊描述也能理解

```bash
# 这样说也行
/cc 玩家受伤时显示红色屏幕效果
# Claude会自动查询HurtComp并实现客户端效果

# 或者这样
/cc 玩家加入时给一把钻石剑
# Claude会创建事件监听和物品创建
```

### 3. 利用搜索加速开发

```bash
# 先搜索相关内容
/cc 搜索 AOI感应区

# 根据搜索结果执行任务
/cc 创建一个2000x2000的AOI感应区，检测玩家进入
```

### 4. 双端开发技巧

```bash
# 完整双端功能开发
/cc 创建商店系统：客户端UI按钮→服务端购买逻辑→客户端显示结果

# Claude会自动：
# 1. 创建ClientSystem监听按钮点击
# 2. NotifyToServer发送购买请求
# 3. ServerSystem处理逻辑
# 4. NotifyToClient返回结果
# 5. ClientSystem显示UI反馈
```

### 5. EventData调试技巧

```bash
# 遇到序列化错误时
/cc 检查所有EventData，将tuple改为list

# Claude会自动扫描代码并修复
```

---

## 📞 获取帮助

### 遇到问题？

```bash
# 直接询问Claude
/cc 我遇到了[描述问题]，如何解决？

# 或查阅文档
/cc 搜索 [问题关键词]
```

### 常见问题快速查询

| 问题症状 | 查阅章节 |
|---------|---------|
| GetSystem返回None | 问题排查.md - 问题1 |
| GetComponent返回None | 问题排查.md - 问题2 |
| EventData序列化失败 | 问题排查.md - 问题3 |
| 事件监听不触发 | 问题排查.md - 问题4 |
| 模块导入失败 | 问题排查.md - 问题5 |

完整问题列表：[问题排查.md](./问题排查.md)

---

## 🎓 下一步

现在你已经掌握基础！建议：

1. **实践第一个任务** - 边做边学最有效
2. **查阅完整指令** - [Claude指令参考.md](../Claude指令参考.md)
3. **深入学习规范** - [开发规范.md](./开发规范.md)

```bash
# 开始第一个任务
/cc 创建一个ServerSystem，监听玩家加入游戏事件并发送欢迎消息
```

### 推荐学习路径

```
第1天: 快速开始 + 开发规范（CRITICAL部分）
第2天: 开发指南 - System开发
第3天: 开发指南 - Component和Event
第4天: 开发指南 - Entity和AOI
第5天: 实战项目 + 问题排查
```

祝开发顺利！

---

_最后更新: 2025-11-09 | 文档版本: 3.0_
