# é—®é¢˜æ’æŸ¥æŒ‡å—

> **ğŸ“ å¯¼èˆª**: [ğŸ  é¦–é¡µ](../README.md) > [ğŸ“‚ æ–‡æ¡£](../README.md#æ–‡æ¡£å¯¼èˆª) > é—®é¢˜æ’æŸ¥
>
> ğŸ”§ å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆã€è°ƒè¯•æŠ€å·§å’Œæ€§èƒ½ä¼˜åŒ–å»ºè®®
>
> **ğŸ“… æœ€åæ›´æ–°**: 2025-11-09
> **æ–‡æ¡£ç‰ˆæœ¬**: 4.0 (åŸºäºMODSDKå®˜æ–¹æ–‡æ¡£å…¨é¢é‡æ„)

---

## ğŸ“‹ ç›®å½•

1. [å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰](#å¸¸è§é—®é¢˜faq)
2. [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)
3. [ç½‘æ˜“å¼•æ“é™åˆ¶](#ç½‘æ˜“å¼•æ“é™åˆ¶)
4. [æ€§èƒ½é—®é¢˜](#æ€§èƒ½é—®é¢˜)

---

## å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### é—®é¢˜1ï¼šè·¨ç«¯GetSystemè¿”å›None

**ç—‡çŠ¶**ï¼šæœåŠ¡ç«¯å°è¯•GetSystemè·å–å®¢æˆ·ç«¯ç³»ç»Ÿè¿”å›Noneï¼Œè°ƒç”¨æ–¹æ³•æŠ¥AttributeError

**é”™è¯¯ä»£ç **ï¼š
```python
# âŒ é”™è¯¯ç¤ºä¾‹
class ServerSystem(ServerSystem):
    def __init__(self, namespace, systemName):
        ServerSystem.__init__(self, namespace, systemName)
        # å°è¯•è·å–å®¢æˆ·ç«¯System
        clientSys = serverApi.GetSystem("MyMod", "MyClientSystem")  # è¿”å›None!
        clientSys.DoSomething()  # AttributeError: 'NoneType' object has no attribute
```

**åŸå› **ï¼šServerå’ŒClientè¿è¡Œåœ¨**å®Œå…¨ç‹¬ç«‹çš„è¿›ç¨‹**ä¸­ï¼Œæ— æ³•è·¨ç«¯GetSystem

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨åŒç«¯é€šä¿¡

```python
# âœ… æ­£ç¡® - æœåŠ¡ç«¯å‘é€äº‹ä»¶åˆ°å®¢æˆ·ç«¯
class ServerSystem(ServerSystem):
    def NotifyClient(self, playerId):
        data = self.CreateEventData()
        data["message"] = "Hello"
        self.NotifyToClient(playerId, "UpdateUI", data)

# âœ… æ­£ç¡® - å®¢æˆ·ç«¯ç›‘å¬æœåŠ¡ç«¯äº‹ä»¶
class ClientSystem(ClientSystem):
    def Create(self):
        self.ListenForEvent("MyMod", "MyServerSystem", "UpdateUI", self, self.OnUpdate)
```

**è¯¦è§**ï¼š[å¼€å‘è§„èŒƒ.md - åŒç«¯éš”ç¦»åŸåˆ™](./å¼€å‘è§„èŒƒ.md#21-åŒç«¯éš”ç¦»åŸåˆ™-)

---

### é—®é¢˜2ï¼š__init__ä¸­è°ƒç”¨APIè¿”å›None

**ç—‡çŠ¶**ï¼šåœ¨Systemçš„`__init__`ä¸­è°ƒç”¨GetComponentã€ListenForEventç­‰APIå¤±è´¥æˆ–è¿”å›None

**é”™è¯¯ä»£ç **ï¼š
```python
# âŒ é”™è¯¯ç¤ºä¾‹
class MySystem(ServerSystem):
    def __init__(self, namespace, systemName):
        ServerSystem.__init__(self, namespace, systemName)
        # åœ¨__init__ä¸­è°ƒç”¨API
        self.gameComp = serverApi.GetEngineCompFactory().CreateGame(levelId)  # None!
        self.ListenForEvent(...)  # å¯èƒ½å¤±è´¥
```

**åŸå› **ï¼š`__init__`æ—¶æ¸¸æˆå¼•æ“æœªå®Œæˆåˆå§‹åŒ–ï¼Œå®ä½“/ç»„ä»¶æœªæ³¨å†Œ

**è§£å†³æ–¹æ¡ˆ**ï¼šæ‰‹åŠ¨è°ƒç”¨Create()

```python
# âœ… æ­£ç¡®ç¤ºä¾‹
class MySystem(ServerSystem):
    def __init__(self, namespace, systemName):
        ServerSystem.__init__(self, namespace, systemName)
        self.gameComp = None  # åªå£°æ˜
        self.Create()  # âš ï¸ æ‰‹åŠ¨è°ƒç”¨

    def Create(self):
        """âœ… åœ¨è¿™é‡Œåˆå§‹åŒ–"""
        levelId = serverApi.GetLevelId()
        self.gameComp = serverApi.GetEngineCompFactory().CreateGame(levelId)
        self.ListenForEvent(...)
```

**è¯¦è§**ï¼š[å¼€å‘è§„èŒƒ.md - Systemç”Ÿå‘½å‘¨æœŸé™åˆ¶](./å¼€å‘è§„èŒƒ.md#22-systemç”Ÿå‘½å‘¨æœŸé™åˆ¶-)

---

### é—®é¢˜3ï¼šEventDataåºåˆ—åŒ–å¤±è´¥

**ç—‡çŠ¶**ï¼šä½¿ç”¨NotifyToClient/NotifyToServerå‘é€æ•°æ®æ—¶å¤±è´¥æˆ–æ•°æ®ä¸¢å¤±

**é”™è¯¯ä»£ç **ï¼š
```python
# âŒ é”™è¯¯ç¤ºä¾‹
data = self.CreateEventData()
data["position"] = (100, 64, 100)  # tupleä¸æ”¯æŒåºåˆ—åŒ–!
self.NotifyToClient(playerId, "TeleportEvent", data)  # å¤±è´¥!
```

**åŸå› **ï¼šEventDataä¸æ”¯æŒtupleç±»å‹ï¼Œåªæ”¯æŒdictã€listã€strã€intã€floatã€bool

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨listä»£æ›¿tuple

```python
# âœ… æ­£ç¡®ç¤ºä¾‹
data = self.CreateEventData()
data["position"] = [100, 64, 100]  # ä½¿ç”¨list
data["items"] = [{"id": 1}, {"id": 2}]  # åµŒå¥—dictå’Œlistå¯ä»¥
self.NotifyToClient(playerId, "TeleportEvent", data)  # æˆåŠŸ
```

**æ”¯æŒçš„æ•°æ®ç±»å‹**ï¼š
- âœ… dict
- âœ… list
- âœ… str
- âœ… int, float, bool
- âŒ tupleï¼ˆä¸æ”¯æŒï¼‰
- âŒ å¯¹è±¡å®ä¾‹ï¼ˆä¸æ”¯æŒï¼‰

**è¯¦è§**ï¼š[å¼€å‘è§„èŒƒ.md - EventDataåºåˆ—åŒ–é™åˆ¶](./å¼€å‘è§„èŒƒ.md#23-eventdataåºåˆ—åŒ–é™åˆ¶-)

---

### é—®é¢˜4ï¼šæ¨¡å—å¯¼å…¥é”™è¯¯ - TypeError: 'module' object is not callable

**ç—‡çŠ¶**ï¼šå¯åŠ¨æ—¶æŠ¥é”™`TypeError: 'module' object is not callable`

**é”™è¯¯ä»£ç **ï¼š
```python
# âŒ é”™è¯¯ç¤ºä¾‹ - modMain.py
import modConfig  # âŒ é”™è¯¯å¯¼å…¥æ–¹å¼

@Mod.Binding(name=modConfig.MOD_NAME, version=modConfig.MOD_VERSION)
class MyMod(object):
    pass
```

**åŸå› **ï¼šç½‘æ˜“å¼•æ“ä¼šæ‰«ææ¨¡å—çš„æ‰€æœ‰å±æ€§ï¼Œå°è¯•å®ä¾‹åŒ–å…·æœ‰`MOD_NAME`çš„å¯¹è±¡ã€‚ä½¿ç”¨`import modConfig`ä¼šå°†æ¨¡å—å¯¹è±¡æš´éœ²ï¼Œå¯¼è‡´å¼•æ“å°è¯•è°ƒç”¨`modConfig()`

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨`from ... import ...`

```python
# âœ… æ­£ç¡®ç¤ºä¾‹ - modMain.py
from modConfig import MOD_NAME, MOD_VERSION, SERVER_SYSTEMS, CLIENT_SYSTEMS

@Mod.Binding(name=MOD_NAME, version=MOD_VERSION)
class MyMod(object):
    pass
```

**å­ç›®å½•å¯¼å…¥**ï¼š
```python
# âœ… æ­£ç¡® - åœ¨å­ç›®å½•æ–‡ä»¶ä¸­ä½¿ç”¨å®Œæ•´è·¯å¾„
# æ–‡ä»¶ä½ç½®: MyMod/systems/MySystem.py
from MyMod.modConfig import MOD_NAME

# âŒ é”™è¯¯ - åœ¨å­ç›®å½•ä¸­ä½¿ç”¨ç›¸å¯¹å¯¼å…¥
from modConfig import MOD_NAME  # ImportError!
```

**è¯¦è§**ï¼š[å¼€å‘è§„èŒƒ.md - æ¨¡å—å¯¼å…¥è§„èŒƒ](./å¼€å‘è§„èŒƒ.md#7-æ¨¡å—å¯¼å…¥è§„èŒƒ-critical)

---

### é—®é¢˜5ï¼šå­ç›®å½•å¯¼å…¥å¤±è´¥ - ImportError: No module named modConfig

**ç—‡çŠ¶**ï¼šåœ¨å­ç›®å½•æ–‡ä»¶ä¸­å¯¼å…¥modConfigæŠ¥ImportError

**é”™è¯¯ä»£ç **ï¼š
```python
# âŒ é”™è¯¯ç¤ºä¾‹
# æ–‡ä»¶ä½ç½®: MyMod/systems/MySystem.py
from modConfig import MOD_NAME  # ImportError: No module named modConfig
```

**åŸå› **ï¼š`modConfig.py`ä½äºåŒ…æ ¹ç›®å½•ï¼Œå­ç›®å½•æ–‡ä»¶ä¸åœ¨åŒä¸€å±‚çº§

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨å®Œæ•´åŒ…è·¯å¾„

```python
# âœ… æ­£ç¡®ç¤ºä¾‹
# æ–‡ä»¶ä½ç½®: MyMod/systems/MySystem.py
from MyMod.modConfig import MOD_NAME
from MyMod.config.game_config import GAME_RULES
```

**å¯¼å…¥è§„åˆ™å¯¹ç…§è¡¨**ï¼š

| æ–‡ä»¶ä½ç½® | æ­£ç¡®å¯¼å…¥æ–¹å¼ | é”™è¯¯å¯¼å…¥æ–¹å¼ |
|---------|-------------|-------------|
| `MyMod/modMain.py` | `from modConfig import MOD_NAME` | âœ… åŒçº§ç›®å½•å¯ç”¨ |
| `MyMod/systems/MySystem.py` | `from MyMod.modConfig import MOD_NAME` | âŒ `from modConfig import ...` |
| `MyMod/config/game_config.py` | `from MyMod.modConfig import MOD_NAME` | âŒ `from modConfig import ...` |

---

### é—®é¢˜6ï¼šå®ä½“æ— æ³•äº¤äº’

**ç—‡çŠ¶**ï¼šåˆ›å»ºçš„å®ä½“åœ¨æ¸¸æˆä¸­æ— å“åº”æˆ–æ— æ³•äº¤äº’

**å¯èƒ½åŸå› **ï¼š

1. **å®ä½“åœ¨é”™è¯¯çš„ç»´åº¦åˆ›å»º**
```python
# âœ… ç¡®ä¿ç»´åº¦IDæ­£ç¡®
dimension_id = 0  # ä¸»ä¸–ç•Œ
entityId = self.CreateEngineEntityByTypeStr(
    'minecraft:zombie',
    (100, 64, 100),
    (0, 0),
    dimension_id  # ç¡®è®¤ç»´åº¦ID
)
```

2. **å®ä½“ç±»å‹æ ‡è¯†ç¬¦é”™è¯¯**
```python
# âœ… ä½¿ç”¨æ­£ç¡®çš„å®ä½“æ ‡è¯†ç¬¦
"minecraft:zombie"  # åŸç‰ˆå®ä½“
"namespace:custom_entity"  # è‡ªå®šä¹‰å®ä½“
```

3. **åŒºå—æœªåŠ è½½**
```python
# æ£€æŸ¥å®ä½“æ˜¯å¦åœ¨åŠ è½½çš„åŒºå—ä¸­
if self.gameComp.IsEntityAlive(entityId):
    print("å®ä½“å­˜æ´»")
else:
    print("å®ä½“ä¸å­˜åœ¨æˆ–åŒºå—æœªåŠ è½½")
```

---

### é—®é¢˜7ï¼šå®¢æˆ·ç«¯äº‹ä»¶æ— æ³•æ¥æ”¶

**ç—‡çŠ¶**ï¼šæœåŠ¡ç«¯å‘é€çš„äº‹ä»¶å®¢æˆ·ç«¯æ”¶ä¸åˆ°

**æ’æŸ¥æ­¥éª¤**ï¼š

1. **æ£€æŸ¥äº‹ä»¶åç§°æ˜¯å¦ä¸€è‡´**
```python
# æœåŠ¡ç«¯
self.NotifyToClient(playerId, "UpdateUI", data)  # äº‹ä»¶å: UpdateUI

# å®¢æˆ·ç«¯
self.ListenForEvent("MyMod", "MyServerSystem", "UpdateUI", self, self.OnUpdate)  # äº‹ä»¶åå¿…é¡»ä¸€è‡´
```

2. **éªŒè¯å®¢æˆ·ç«¯Systemæ˜¯å¦æ³¨å†Œ**
```python
# modConfig.py
CLIENT_SYSTEMS = [
    ("MyClientSystem", "MyMod.systems.MyClientSystem.MyClientSystem"),
]
```

3. **ç¡®è®¤ä½¿ç”¨äº†æ­£ç¡®çš„å‘é€æ–¹æ³•**
```python
# å‘é€ç»™å•ä¸ªç©å®¶
self.NotifyToClient(playerId, "UpdateUI", data)

# å¹¿æ’­ç»™æ‰€æœ‰ç©å®¶
self.BroadcastToAllClient("GlobalMessage", data)

# å‘é€ç»™å¤šä¸ªç©å®¶
self.NotifyToMultiClients([playerId1, playerId2], "TeamMessage", data)
```

---

### é—®é¢˜8ï¼šé…ç½®æ–‡ä»¶è¯»å–å¤±è´¥

**ç—‡çŠ¶**ï¼šé…ç½®æ–‡ä»¶æ— æ³•åŠ è½½æˆ–æ•°æ®ä¸æ­£ç¡®

**æ’æŸ¥æ­¥éª¤**ï¼š

1. **æ£€æŸ¥æ–‡ä»¶è·¯å¾„**
```python
# ä½¿ç”¨å®Œæ•´åŒ…è·¯å¾„
from MyMod.config.game_config import GAME_RULES
```

2. **æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•**
```python
# âœ… æ­£ç¡®çš„é…ç½®æ ¼å¼
GAME_RULES = {
    "MAX_PLAYERS": 16,
    "RESPAWN_TIME": 5
}

# âŒ é”™è¯¯ï¼šæœ«å°¾é€—å·ã€æ³¨é‡Šç­‰
GAME_RULES = {
    "MAX_PLAYERS": 16,  # æ³¨é‡Šä¼šå¯¼è‡´é”™è¯¯
}
```

3. **ç¡®è®¤Python 2.7å…¼å®¹æ€§**
```python
# âœ… ä½¿ç”¨Unicodeå­—ç¬¦ä¸²
name = u"ç©å®¶"

# âŒ é¿å…ä½¿ç”¨Python 3ç‰¹æ€§
name = f"ç©å®¶{id}"  # f-stringsä¸æ”¯æŒ
```

---

### é—®é¢˜9ï¼šAOIæ„Ÿåº”åŒºä¸ç”Ÿæ•ˆ

**ç—‡çŠ¶**ï¼šCreateEntityAOIåˆ›å»ºçš„æ„Ÿåº”åŒºä¸è§¦å‘å›è°ƒ

**å¯èƒ½åŸå› **ï¼š

1. **æ„Ÿåº”åŒºèŒƒå›´è¶…è¿‡2000æ ¼**
```python
# âŒ é”™è¯¯ï¼šèŒƒå›´å¤ªå¤§
dimComp.CreateEntityAOI(
    dimension=0,
    name="huge_zone",
    aabb=(0, 0, 0, 3000, 256, 3000),  # é•¿å®½3000æ ¼ï¼Œè¶…è¿‡é™åˆ¶!
    func=self.OnEnter
)

# âœ… æ­£ç¡®ï¼šä½¿ç”¨å¤šä¸ªå°æ„Ÿåº”åŒº
dimComp.CreateEntityAOI(
    dimension=0,
    name="zone1",
    aabb=(0, 0, 0, 1000, 256, 1000),  # é•¿å®½1000æ ¼
    func=self.OnEnter
)
```

2. **åŒºå—æœªåŠ è½½**
- AOIæ„Ÿåº”åŒºæ‰€åœ¨çš„åŒºå—å¿…é¡»è¢«åŠ è½½æ‰èƒ½å·¥ä½œ
- å»ºè®®åœ¨ç©å®¶æ´»åŠ¨é¢‘ç¹çš„åŒºåŸŸè®¾ç½®æ„Ÿåº”åŒº

3. **å›è°ƒå‡½æ•°æœªæ­£ç¡®ç»‘å®š**
```python
# âœ… ç¡®ä¿å›è°ƒå‡½æ•°æ­£ç¡®å®šä¹‰
def OnEnter(self, args):
    if args['isEnter']:
        print("å®ä½“è¿›å…¥:", args['entityId'])
```

---

### é—®é¢˜10ï¼šè”æœºå¤§å…Modä¸ç”Ÿæ•ˆ

**ç—‡çŠ¶**ï¼šåœ¨å•äººæ¨¡å¼æ­£å¸¸ï¼Œè”æœºå¤§å…ä¸å·¥ä½œ

**å¯èƒ½åŸå› **ï¼š

1. **modAPIç‰ˆæœ¬å·ä¸åŒ¹é…**
- æ£€æŸ¥manifest.jsonä¸­çš„modAPIç‰ˆæœ¬
- ç¡®ä¿ä¸è”æœºå¤§å…è¦æ±‚çš„ç‰ˆæœ¬ä¸€è‡´

2. **å®¢æˆ·ç«¯ä»£ç å¯¼å…¥äº†æœåŠ¡ç«¯æ¨¡å—**
```python
# âŒ é”™è¯¯ï¼šå®¢æˆ·ç«¯ä»£ç å¯¼å…¥æœåŠ¡ç«¯æ¨¡å—
# MyClientSystem.py
from MyMod.systems.MyServerSystem import MyServerSystem  # å¯¼è‡´å®¢æˆ·ç«¯å¤±æ•ˆ!

# âœ… æ­£ç¡®ï¼šå®Œå…¨éš”ç¦»åŒç«¯ä»£ç 
# å®¢æˆ·ç«¯åªå¯¼å…¥å®¢æˆ·ç«¯æ¨¡å—
# æœåŠ¡ç«¯åªå¯¼å…¥æœåŠ¡ç«¯æ¨¡å—
```

3. **é…ç½®æ–‡ä»¶ä¸ä¸€è‡´**
- ç¡®ä¿world_behavior_packs.jsonä¸manifest.jsonä¸€è‡´

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨print()è¾“å‡ºæ—¥å¿—

**æ¨èçš„æ—¥å¿—æ ¼å¼**ï¼š
```python
print("[INFO] [ç³»ç»Ÿå] æ¶ˆæ¯å†…å®¹")
print("[ERROR] [ç³»ç»Ÿå] é”™è¯¯ä¿¡æ¯")
print("[DEBUG] [ç³»ç»Ÿå] è°ƒè¯•ä¿¡æ¯")

# ç¤ºä¾‹
print("[INFO] [MySystem] ç©å®¶åŠ å…¥:", playerId)
print("[ERROR] [MySystem] æ•°æ®ä¸å­˜åœ¨:", dataId)
print("[DEBUG] [DataManager] ç©å®¶æ•°æ®:", playerData)
```

**æ—¥å¿—çº§åˆ«æ§åˆ¶**ï¼š
```python
DEBUG = False  # ç”Ÿäº§ç¯å¢ƒè®¾ä¸ºFalse

if DEBUG:
    print("[DEBUG] è°ƒè¯•ä¿¡æ¯")
```

### 2. æ—¥å¿—è¾“å‡ºä½ç½®

- **æ¸¸æˆæ—¥å¿—**ï¼šç½‘æ˜“MCå®¢æˆ·ç«¯çš„æ—¥å¿—ç›®å½•
- **æ§åˆ¶å°è¾“å‡º**ï¼šæ¸¸æˆè¿è¡Œæ—¶çš„æ§åˆ¶å°çª—å£
- **Studioæ—¥å¿—**ï¼šå¼€å‘è€…å·¥å…·çš„è„šæœ¬æµ‹è¯•æ—¥å¿—çª—å£

### 3. å¼‚å¸¸æ•è·

```python
try:
    # ä½ çš„ä»£ç 
    result = self.doSomething()
except Exception as e:
    print("[ERROR] å‘ç”Ÿå¼‚å¸¸:", e)
    import traceback
    traceback.print_exc()  # æ‰“å°å®Œæ•´å †æ ˆ
```

### 4. å˜é‡è°ƒè¯•

```python
# æ‰“å°å˜é‡ç±»å‹å’Œå€¼
print("[DEBUG] type(obj):", type(obj), "value:", obj)

# æ‰“å°å­—å…¸å†…å®¹
import json
print("[DEBUG] data:", json.dumps(data, indent=2, ensure_ascii=False))

# æ‰“å°åˆ—è¡¨é•¿åº¦
print("[DEBUG] åˆ—è¡¨é•¿åº¦:", len(myList), "å†…å®¹:", myList)
```

### 5. äº‹ä»¶è°ƒè¯•

```python
def OnPlayerJoin(self, args):
    """è°ƒè¯•äº‹ä»¶å‚æ•°"""
    print("[DEBUG] OnPlayerJoin args:", args)
    # æŸ¥çœ‹æ‰€æœ‰å‚æ•°
    for key, value in args.items():
        print("[DEBUG] {}: {}".format(key, value))
```

### 6. çƒ­æ›´æ–°è°ƒè¯•

**æ”¯æŒçƒ­æ›´æ–°çš„ä¿®æ”¹**ï¼š
- âœ… å‡½æ•°å†…å®ç°ä¿®æ”¹
- âœ… æ–¹æ³•é€»è¾‘ä¿®æ”¹
- âœ… äº‹ä»¶å›è°ƒä¿®æ”¹

**éœ€è¦å®Œæ•´é‡è½½çš„ä¿®æ”¹**ï¼š
- âŒ æ–°å¢ç±»
- âŒ æ–°å¢æ–‡ä»¶
- âŒ å…¨å±€å˜é‡ä¿®æ”¹
- âŒ ç±»ç»“æ„ä¿®æ”¹

**å®Œæ•´é‡è½½æ–¹æ³•**ï¼š
1. ä¿å­˜é€€å‡ºå½“å‰å­˜æ¡£
2. é‡æ–°è¿›å…¥å­˜æ¡£

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## ç½‘æ˜“å¼•æ“é™åˆ¶

### 1. Pythonç‰ˆæœ¬é™åˆ¶
- âœ… **å¿…é¡»å…¼å®¹Python 2.7**
- âŒ ä¸èƒ½ä½¿ç”¨Python 3ä¸“æœ‰ç‰¹æ€§ï¼ˆf-stringsã€async/awaitç­‰ï¼‰

### 2. å®ä½“æ ‡è¯†ç¬¦é™åˆ¶
- âœ… å®ä½“ç±»å‹åç§°å»ºè®®ä¸è¶…è¿‡32å­—ç¬¦
- âœ… ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ï¼š`mygame_entity_custom`
- âœ… ä½¿ç”¨å‘½åç©ºé—´ï¼š`namespace:entity_type`

### 3. ç»´åº¦ç®¡ç†é™åˆ¶
- âœ… ç»´åº¦IDå¿…é¡»æ˜¯æ•´æ•°
- âœ… æ¨èä½¿ç”¨10000ä»¥ä¸Šé¿å…å†²çª
- âœ… ä¸»ä¸–ç•Œï¼š0ï¼Œåœ°ç‹±ï¼š1ï¼Œæœ«åœ°ï¼š2

### 4. äº‹ä»¶ç³»ç»Ÿé™åˆ¶
- âœ… äº‹ä»¶æ•°æ®å¿…é¡»å¯åºåˆ—åŒ–ï¼ˆdictã€listã€strã€intã€floatã€boolï¼‰
- âŒ ä¸èƒ½ä¼ é€’tupleï¼ˆä¼šå¯¼è‡´åºåˆ—åŒ–å¤±è´¥ï¼‰
- âŒ ä¸èƒ½ä¼ é€’å¯¹è±¡å®ä¾‹
- âœ… è‡ªå®šä¹‰äº‹ä»¶åç§°å»ºè®®ä½¿ç”¨é©¼å³°å‘½åï¼š`PlayerCoinChangeEvent`

### 5. ç»„ä»¶é™åˆ¶
- âš ï¸ æŸäº›ç»„ä»¶åœ¨ç‰¹å®šç»´åº¦æˆ–æ¸¸æˆæ¨¡å¼ä¸‹å¯èƒ½ä¸å¯ç”¨
- âš ï¸ å®¢æˆ·ç«¯ç»„ä»¶ä¸èƒ½åœ¨æœåŠ¡ç«¯ä½¿ç”¨ï¼Œåä¹‹äº¦ç„¶
- âš ï¸ éœ€è¦åœ¨Create()ä¸­è·å–ç»„ä»¶ï¼Œä¸èƒ½åœ¨__init__ä¸­

### 6. AOIé™åˆ¶
- âš ï¸ AOIæ„Ÿåº”åŒºé•¿å®½ä¸èƒ½è¶…è¿‡2000æ ¼
- âš ï¸ æ¨èä½¿ç”¨å¤šä¸ªå°æ„Ÿåº”åŒº
- âš ï¸ åŒºå—å¸è½½æ—¶IsEntityAliveè¿”å›False

### 7. åŒç«¯éš”ç¦»é™åˆ¶
- âŒ æœåŠ¡ç«¯ä¸èƒ½GetSystemè·å–å®¢æˆ·ç«¯ç³»ç»Ÿ
- âŒ å®¢æˆ·ç«¯ä¸èƒ½GetSystemè·å–æœåŠ¡ç«¯ç³»ç»Ÿ
- âœ… å¿…é¡»ä½¿ç”¨NotifyToClient/NotifyToServeré€šä¿¡

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## æ€§èƒ½é—®é¢˜

### é—®é¢˜1ï¼šTickæ€§èƒ½ä½

**ç—‡çŠ¶**ï¼šUpdate()æ–¹æ³•æ‰§è¡Œé¢‘ç¹ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™

**è§£å†³**ï¼šä½¿ç”¨è®¡æ•°å™¨é™ä½é¢‘ç‡

```python
class MySystem(ServerSystem):
    def __init__(self, namespace, systemName):
        ServerSystem.__init__(self, namespace, systemName)
        self.tickCount = 0
        self.Create()

    def Update(self):
        self.tickCount += 1

        # æ¯20 tickï¼ˆ1ç§’ï¼‰æ‰§è¡Œä¸€æ¬¡
        if self.tickCount % 20 == 0:
            self.oncePerSecond()

        # æ¯100 tickï¼ˆ5ç§’ï¼‰æ‰§è¡Œä¸€æ¬¡
        if self.tickCount % 100 == 0:
            self.oncePerFiveSeconds()

    def oncePerSecond(self):
        """æ¯ç§’æ‰§è¡Œä¸€æ¬¡çš„é€»è¾‘"""
        pass

    def oncePerFiveSeconds(self):
        """æ¯5ç§’æ‰§è¡Œä¸€æ¬¡çš„é€»è¾‘"""
        pass
```

### é—®é¢˜2ï¼šå†…å­˜æ³„æ¼

**ç—‡çŠ¶**ï¼šé•¿æ—¶é—´è¿è¡Œåå†…å­˜å ç”¨æŒç»­å¢é•¿

**è§£å†³**ï¼š

1. **åœ¨Destroy()ä¸­æ¸…ç†èµ„æº**
```python
def Destroy(self):
    # å–æ¶ˆäº‹ä»¶ç›‘å¬
    self.UnListenAllEvents()

    # æ¸…ç†æ•°æ®
    self.players.clear()
    self.entities.clear()
```

2. **åŠæ—¶åˆ é™¤ä¸éœ€è¦çš„æ•°æ®**
```python
def OnPlayerLeave(self, args):
    playerId = args['playerId']
    # æ¸…ç†ç©å®¶æ•°æ®
    if playerId in self.players:
        del self.players[playerId]
```

### é—®é¢˜3ï¼šå¤§é‡æ—¥å¿—å½±å“æ€§èƒ½

**ç—‡çŠ¶**ï¼šé¢‘ç¹æ‰“å°æ—¥å¿—å¯¼è‡´æ€§èƒ½ä¸‹é™

**è§£å†³**ï¼šä½¿ç”¨DEBUGå¼€å…³

```python
DEBUG = False  # ç”Ÿäº§ç¯å¢ƒè®¾ä¸ºFalse

def logDebug(self, msg):
    if DEBUG:
        print("[DEBUG] [MySystem]", msg)

def logInfo(self, msg):
    print("[INFO] [MySystem]", msg)

# ä½¿ç”¨
self.logInfo("ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ")  # æ€»æ˜¯è¾“å‡º
self.logDebug("è°ƒè¯•ä¿¡æ¯")  # ä»…å¼€å‘ç¯å¢ƒè¾“å‡º
```

### é—®é¢˜4ï¼šé¢‘ç¹åˆ›å»ºEventData

**ç—‡çŠ¶**ï¼šé¢‘ç¹è°ƒç”¨CreateEventData()å’ŒNotifyToClient()

**è§£å†³**ï¼šæ‰¹é‡å‘é€æˆ–é™ä½é¢‘ç‡

```python
# âŒ é”™è¯¯ï¼šæ¯ä¸ªç©å®¶å•ç‹¬å‘é€
for playerId in playerIds:
    data = self.CreateEventData()
    data["message"] = "Hello"
    self.NotifyToClient(playerId, "UpdateUI", data)

# âœ… æ­£ç¡®ï¼šä½¿ç”¨æ‰¹é‡å‘é€
data = self.CreateEventData()
data["message"] = "Hello"
self.NotifyToMultiClients(playerIds, "UpdateUI", data)  # æ€§èƒ½æ›´å¥½
```

### é—®é¢˜5ï¼šå¤æ‚è®¡ç®—åœ¨Updateä¸­æ‰§è¡Œ

**ç—‡çŠ¶**ï¼šå¤æ‚è®¡ç®—æ¯tickéƒ½æ‰§è¡Œï¼Œå¯¼è‡´å¡é¡¿

**è§£å†³**ï¼š

1. **é™ä½æ‰§è¡Œé¢‘ç‡**
```python
def Update(self):
    self.tickCount += 1
    # æ¯5ç§’æ‰§è¡Œä¸€æ¬¡å¤æ‚è®¡ç®—
    if self.tickCount % 100 == 0:
        self.complexCalculation()
```

2. **ä½¿ç”¨ç¼“å­˜**
```python
class MySystem(ServerSystem):
    def __init__(self, namespace, systemName):
        ServerSystem.__init__(self, namespace, systemName)
        self.cache = {}  # ç¼“å­˜è®¡ç®—ç»“æœ
        self.Create()

    def getExpensiveData(self, key):
        # å…ˆæ£€æŸ¥ç¼“å­˜
        if key in self.cache:
            return self.cache[key]

        # æ‰§è¡Œå¤æ‚è®¡ç®—
        result = self.complexCalculation(key)
        self.cache[key] = result
        return result
```

3. **å¼‚æ­¥å¤„ç†**
```python
# å°†å¤æ‚è®¡ç®—åˆ†æ•£åˆ°å¤šä¸ªtick
class MySystem(ServerSystem):
    def __init__(self, namespace, systemName):
        ServerSystem.__init__(self, namespace, systemName)
        self.processQueue = []  # å¾…å¤„ç†é˜Ÿåˆ—
        self.Create()

    def Update(self):
        # æ¯tickåªå¤„ç†ä¸€ä¸ªä»»åŠ¡
        if self.processQueue:
            task = self.processQueue.pop(0)
            self.processTask(task)

    def addTask(self, task):
        """æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—"""
        self.processQueue.append(task)
```

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼š

1. ğŸ“– **æŸ¥çœ‹ç›¸å…³æ–‡æ¡£**ï¼š
   - [å¼€å‘è§„èŒƒ](./å¼€å‘è§„èŒƒ.md) - CRITICALè§„èŒƒ
   - [å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—.md) - å®Œæ•´å¼€å‘æµç¨‹
   - [CLAUDE.md](../CLAUDE.md) - AIå·¥ä½œæµå‚è€ƒ

2. ğŸ” **æŸ¥é˜…å®˜æ–¹æ–‡æ¡£**ï¼š
   - [ç½‘æ˜“MODSDK Wiki](https://github.com/EaseCation/netease-modsdk-wiki) - å®˜æ–¹APIæ–‡æ¡£
   - [åŸºå²©ç‰ˆWiki](https://github.com/Bedrock-OSS/bedrock-wiki) - åŸç‰ˆæœºåˆ¶å‚è€ƒ

3. ğŸ“ **è®°å½•é—®é¢˜è¯¦æƒ…**å¹¶å¯»æ±‚å¸®åŠ©ï¼š
   - è¯¦ç»†æè¿°é—®é¢˜ç°è±¡
   - æä¾›é”™è¯¯æ—¥å¿—
   - é™„ä¸Šç›¸å…³ä»£ç ç‰‡æ®µ
   - è¯´æ˜å·²å°è¯•çš„è§£å†³æ–¹æ³•

[â¬†ï¸ è¿”å›ç›®å½•](#ç›®å½•)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### é‡è¦å‚è€ƒ
- [å¼€å‘è§„èŒƒ](./å¼€å‘è§„èŒƒ.md) - é¿å…å¸¸è§é”™è¯¯
- [å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—.md) - æ­£ç¡®å¼€å‘æ–¹å¼
- [å¿«é€Ÿå¼€å§‹](./å¿«é€Ÿå¼€å§‹.md) - ç¯å¢ƒé…ç½®é—®é¢˜

### æ¶æ„æ–‡æ¡£
- [CLAUDE.md](../CLAUDE.md) - æ ¸å¿ƒæ¶æ„å‚è€ƒ
- [é¡¹ç›®çŠ¶æ€](./é¡¹ç›®çŠ¶æ€.md) - åŠŸèƒ½æ¸…å•

---

**[â¬†ï¸ è¿”å›é¡¶éƒ¨](#é—®é¢˜æ’æŸ¥æŒ‡å—)** | **[ğŸ  è¿”å›é¦–é¡µ](../README.md)**

---

_æœ€åæ›´æ–°: 2025-11-09 | æ–‡æ¡£ç‰ˆæœ¬: 4.0 (åŸºäºMODSDKå®˜æ–¹æ–‡æ¡£å…¨é¢é‡æ„)_
